import{injectExtension as t}from"@polkadot/extension-inject";function e(t,e){if(null==t)return{};var s,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)e.indexOf(s=a[n])>=0||(i[s]=t[s]);return i}class s{constructor(t,{name:e,version:s,autoConnect:n=!1,waitReady:i=!0,connectOptions:a}={}){var o=this;this.wallet=void 0,this.name=void 0,this.version=void 0,this.injected=!1,this.shouldConnect=void 0,this.shouldWait=void 0,this.connectOptions=void 0,this.waitReady=()=>this.wallet.isReady.then(()=>!0),this.filterAccounts=t=>t.filter(t=>"ed25519"===t.type),this.getAccounts=async function(){const t=await o.wallet.provider.request({method:"wallet_accounts"});return o.filterAccounts(t)},this.subscribeAccounts=t=>this.wallet.subscribe("accounts-update",e=>t(this.filterAccounts(e))),this.signRaw=async function(t){return{id:0,signature:await o.wallet.provider.request({method:"ed25519_signRaw",params:[t.address,t.data]})}},this.signPayload=async function(t){return{id:0,signature:await o.wallet.provider.request({method:"ed25519_signPayload",params:[t]})}},this.enable=async function(){o.shouldWait&&await o.waitReady();const{permissions:t}=o.connectOptions||{};return o.shouldConnect&&"ready"===o.wallet.status?await o.wallet.connect(o.connectOptions):"connected"===o.wallet.status&&t&&await o.wallet.requestPermissions(t).catch(console.warn),{accounts:{get:o.getAccounts,subscribe:o.subscribeAccounts},signer:{signRaw:o.signRaw,signPayload:o.signPayload}}},this.wallet=t,this.name=e||"Cere Wallet",this.version=s||"0.0.0",this.shouldConnect=n,this.shouldWait=i,this.connectOptions=a}get isInjected(){return this.injected}inject(){t(this.enable,{version:this.version,name:this.name}),this.injected=!0}}const n=["target"],i=["targets"],a=async(t,i={})=>{let{target:a="polkadot"}=i,o=e(i,n);if("polkadot"!==a)throw new Error(`Unsupported target: ${a}`);return new s(t,o).enable()},o=async(t,n={})=>{let{targets:a=["polkadot"]}=n,o=e(n,i);a.includes("polkadot")&&new s(t,o).inject()};export{a as enable,o as inject};
//# sourceMappingURL=foo.modern.js.map
