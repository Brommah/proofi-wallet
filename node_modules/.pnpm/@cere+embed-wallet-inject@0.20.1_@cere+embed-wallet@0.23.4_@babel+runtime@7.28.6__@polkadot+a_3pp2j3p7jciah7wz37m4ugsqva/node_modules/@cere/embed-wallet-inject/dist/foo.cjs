var t=require("@polkadot/extension-inject");class e{constructor(t,e){const n=this,i=this,s=this,r=this;let{name:o,version:c,autoConnect:a=!1,waitReady:u=!0,connectOptions:l}=void 0===e?{}:e;this.wallet=void 0,this.name=void 0,this.version=void 0,this.injected=!1,this.shouldConnect=void 0,this.shouldWait=void 0,this.connectOptions=void 0,this.waitReady=()=>this.wallet.isReady.then(()=>!0),this.filterAccounts=t=>t.filter(t=>"ed25519"===t.type),this.getAccounts=function(){try{return Promise.resolve(n.wallet.provider.request({method:"wallet_accounts"})).then(function(t){return n.filterAccounts(t)})}catch(t){return Promise.reject(t)}},this.subscribeAccounts=t=>this.wallet.subscribe("accounts-update",e=>t(this.filterAccounts(e))),this.signRaw=function(t){try{return Promise.resolve(i.wallet.provider.request({method:"ed25519_signRaw",params:[t.address,t.data]})).then(function(t){return{id:0,signature:t}})}catch(t){return Promise.reject(t)}},this.signPayload=function(t){try{return Promise.resolve(s.wallet.provider.request({method:"ed25519_signPayload",params:[t]})).then(function(t){return{id:0,signature:t}})}catch(t){return Promise.reject(t)}},this.enable=function(){try{function t(){function t(){return{accounts:{get:r.getAccounts,subscribe:r.subscribeAccounts},signer:{signRaw:r.signRaw,signPayload:r.signPayload}}}const{permissions:e}=r.connectOptions||{},n=function(){if(r.shouldConnect&&"ready"===r.wallet.status)return Promise.resolve(r.wallet.connect(r.connectOptions)).then(function(){});{const t=function(){if("connected"===r.wallet.status&&e)return Promise.resolve(r.wallet.requestPermissions(e).catch(console.warn)).then(function(){})}();if(t&&t.then)return t.then(function(){})}}();return n&&n.then?n.then(t):t()}const e=function(){if(r.shouldWait)return Promise.resolve(r.waitReady()).then(function(){})}();return Promise.resolve(e&&e.then?e.then(t):t())}catch(n){return Promise.reject(n)}},this.wallet=t,this.name=o||"Cere Wallet",this.version=c||"0.0.0",this.shouldConnect=a,this.shouldWait=u,this.connectOptions=l}get isInjected(){return this.injected}inject(){t.injectExtension(this.enable,{version:this.version,name:this.name}),this.injected=!0}}exports.enable=function(t,n){let{target:i="polkadot",...s}=void 0===n?{}:n;try{if("polkadot"!==i)throw new Error(`Unsupported target: ${i}`);return Promise.resolve(new e(t,s).enable())}catch(t){return Promise.reject(t)}},exports.inject=function(t,n){let{targets:i=["polkadot"],...s}=void 0===n?{}:n;try{return i.includes("polkadot")&&new e(t,s).inject(),Promise.resolve()}catch(t){return Promise.reject(t)}};
//# sourceMappingURL=foo.cjs.map
