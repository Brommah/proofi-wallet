{"version":3,"file":"index.cjs","sources":["../src/types.ts","../src/Signer/Signer.ts","../src/constants.ts","../src/Signer/KeyringSigner.ts","../src/Signer/UriSigner.ts","../src/Signer/Web3Signer.node.ts","../src/Signer/CereWalletSigner.node.ts","../src/Signer/JsonSigner.ts","../src/DDCNodesPallet.ts","../src/DDCClustersPallet.ts","../src/DDCStakingPallet.ts","../src/DDCCustomersPallet.ts","../src/DDCClustersGovPallet.ts","../src/Blockchain.ts","../src/utils/index.ts"],"sourcesContent":["import { HexString } from '@polkadot/util/types';\n\nexport type ClusterId = HexString;\nexport type ClusterParams = {\n  readonly nodeProviderAuthContract?: AccountId | null;\n  readonly erasureCodingRequired: number;\n  readonly erasureCodingTotal: number;\n  readonly replicationTotal: number;\n};\n\n/**\n * @deprecated Use ClusterParams instead.\n */\nexport type ClusterProps = ClusterParams;\n\nexport enum ClusterStatus {\n  Unbonded = 'Unbonded',\n  Bonded = 'Bonded',\n  Activated = 'Activated',\n  Unbonding = 'Unbonding',\n}\n\nexport type Cluster = {\n  readonly clusterId: ClusterId;\n  readonly managerId: AccountId;\n  readonly reserveId: AccountId;\n  readonly props: ClusterParams;\n  readonly status: ClusterStatus;\n};\n\nexport type PartsBerBillion = number;\nexport type BlockInterval = number;\nexport type ClusterProtocolParams = {\n  readonly treasuryShare: PartsBerBillion;\n  readonly validatorsShare: PartsBerBillion;\n  readonly clusterReserveShare: PartsBerBillion;\n  readonly storageBondSize: Amount;\n  readonly storageChillDelay: BlockInterval;\n  readonly storageUnbondingDelay: BlockInterval;\n  readonly unitPerMbStored: Amount;\n  readonly unitPerMbStreamed: Amount;\n  readonly unitPerPutRequest: Amount;\n  readonly unitPerGetRequest: Amount;\n};\n\n/**\n * @deprecated Use ClusterProtocolParams instead.\n */\nexport type ClusterGovernmentParams = ClusterProtocolParams;\n\nexport enum ClusterMember {\n  ClusterManager = 'ClusterManager',\n  NodeProvider = 'NodeProvider',\n}\n\nexport type ReferendumIndex = number;\n\nexport type BucketId = bigint;\nexport type BucketParams = {\n  isPublic: boolean;\n};\n\nexport type Bucket = {\n  readonly bucketId: BucketId;\n  readonly ownerId: AccountId;\n  readonly clusterId: ClusterId;\n  readonly isPublic: boolean;\n  readonly isRemoved: boolean;\n};\n\nexport type AccountId = string;\nexport type StakingInfo = {\n  readonly owner: AccountId;\n  readonly total: bigint;\n  readonly active: bigint;\n};\n\nexport type NodePublicKey = AccountId;\nexport type StorageNodePublicKey = NodePublicKey;\n\nexport enum StorageNodeMode {\n  Full = 'Full',\n  Storage = 'Storage',\n  Cache = 'Cache',\n}\n\nexport type StorageNodeProps = {\n  readonly host: string;\n  readonly httpPort: number;\n  readonly grpcPort: number;\n  readonly p2pPort: number;\n  readonly mode: StorageNodeMode;\n  readonly domain?: string;\n  readonly ssl?: boolean;\n};\n\nexport type StorageNode = {\n  readonly pubKey: StorageNodePublicKey;\n  readonly providerId: AccountId;\n  readonly clusterId: ClusterId | null | undefined;\n  readonly props: StorageNodeProps;\n};\n\nexport type Amount = bigint;\n\nexport type BlockNumber = number;\n\nexport type StakingLedger = {\n  stash: AccountId;\n  total: Amount;\n  active: Amount;\n  chilling: BlockNumber | undefined | null;\n  unlocking: any[];\n};\n\nexport enum ClusterNodeKind {\n  Genesis = 'Genesis',\n  External = 'External',\n}\n","import { Signer as BlockchainSigner } from '@polkadot/types/types';\nimport type { KeyringPair } from '@polkadot/keyring/types';\n\nexport type SignerType = KeyringPair['type'];\n\n/**\n * This abstract class provides a blueprint for creating different types of signers.\n *\n * @group Signers\n * @example\n *\n * ```typescript\n * class MySigner extends Signer {\n *   // Implement abstract properties and methods...\n * }\n *\n * const mySigner = new MySigner();\n * const isReady = await mySigner.isReady();\n * console.log(isReady);\n * ```\n */\nexport abstract class Signer {\n  /**\n   * The type of the signer ('ed25519' or 'sr25519').\n   */\n  abstract readonly type: SignerType;\n\n  /**\n   * The address of the signer.\n   */\n  abstract readonly address: string;\n\n  /**\n   * The public key of the signer.\n   */\n  abstract readonly publicKey: Uint8Array;\n\n  /**\n   * A boolean indicating whether the signer is locked.\n   */\n  abstract readonly isLocked: boolean;\n\n  /**\n   * Gets blockchain the signer.\n   *\n   * @internal\n   * @returns A promise that resolves to the signer.\n   */\n  abstract getSigner(): Promise<BlockchainSigner>;\n\n  /**\n   * Checks if the signer is ready.\n   *\n   * @returns A promise that resolves to a boolean indicating whether the signer is ready.\n   */\n  abstract isReady(): Promise<boolean>;\n\n  /**\n   * Unlocks the signer with a passphrase.\n   *\n   * @param passphrase - The passphrase to unlock the signer.\n   */\n  async unlock(passphrase?: string) {}\n\n  /**\n   * Signs data with the signer.\n   *\n   * @param data - The data to sign.\n   * @returns A promise that resolves to the signature.\n   */\n  abstract sign(data: Uint8Array | string): Promise<Uint8Array>;\n\n  /**\n   * Checks if an object is a signer.\n   *\n   * @param signer - The object to check.\n   * @returns A boolean indicating whether the object is a signer.\n   */\n  static isSigner(signer: unknown): signer is Signer {\n    if (!signer || typeof signer !== 'object') {\n      return false;\n    }\n\n    return signer instanceof Signer || ('isReady' in signer && 'sign' in signer && 'getSigner' in signer);\n  }\n}\n","export const CERE_SS58_PREFIX = 54;\n","import { Signer as BcSigner, SignerPayloadRaw } from '@polkadot/types/types';\nimport { KeyringPair } from '@polkadot/keyring/types';\nimport { cryptoWaitReady } from '@polkadot/util-crypto';\nimport { u8aToHex } from '@polkadot/util';\n\nimport { Signer } from './Signer';\n\n/**\n * Signer that uses a keyring pair to sign data.\n *\n * @group Signers\n * @extends Signer\n * @example\n *\n * ```typescript\n * const pair = new Keyring().addFromUri('//Alice');\n * const keyringSigner = new KeyringSigner(pair);\n * const signature = await keyringSigner.sign('data');\n *\n * console.log(signature);\n * ```\n */\nexport class KeyringSigner extends Signer {\n  constructor(private pair?: KeyringPair) {\n    super();\n\n    this.isReady();\n  }\n\n  get isLocked() {\n    if (!this.pair) {\n      throw new Error('Key pair is not ready!');\n    }\n\n    return this.pair.isLocked;\n  }\n\n  async unlock(passphrase?: string) {\n    await this.isReady();\n\n    if (!this.pair) {\n      throw new Error('Key pair is not ready!');\n    }\n\n    if (this.pair.isLocked) {\n      this.pair.unlock(passphrase);\n    }\n  }\n\n  protected createPair() {\n    if (!this.pair) {\n      throw new Error('Key pair is not provided!');\n    }\n\n    return this.pair;\n  }\n\n  async isReady() {\n    if (this.pair) {\n      return true;\n    }\n\n    const isCryptoReady = await cryptoWaitReady();\n\n    if (!isCryptoReady) {\n      return false;\n    }\n\n    this.pair = this.createPair();\n\n    return true;\n  }\n\n  private getPair() {\n    if (this.pair) {\n      return this.pair;\n    }\n\n    throw new Error('Signer is not ready');\n  }\n\n  get type() {\n    return this.getPair().type;\n  }\n\n  get address() {\n    return this.getPair().address;\n  }\n\n  get publicKey() {\n    return this.getPair().publicKey;\n  }\n\n  async sign(data: Uint8Array | string) {\n    return this.getPair().sign(data);\n  }\n\n  async getSigner(): Promise<BcSigner> {\n    return {\n      signRaw: async ({ data }: SignerPayloadRaw) => {\n        const signature = this.getPair().sign(data, { withType: true });\n\n        return {\n          id: 0,\n          signature: u8aToHex(signature),\n        };\n      },\n    };\n  }\n}\n","import { KeyringPair, KeyringOptions } from '@polkadot/keyring/types';\nimport { Keyring } from '@polkadot/keyring';\n\nimport { CERE_SS58_PREFIX } from '../constants';\nimport { KeyringSigner } from './KeyringSigner';\n\nexport type UriSignerOptions = Pick<KeyringOptions, 'type'>;\n\n/**\n * Signer that uses a Substrate URI to create a keypair.\n *\n * @group Signers\n * @extends Signer\n * @example\n *\n * ```typescript\n * const uriSigner = new UriSigner('//Alice', );\n * const signature = await uriSigner.sign('data');\n *\n * console.log(signature);\n * ```\n */\nexport class UriSigner extends KeyringSigner {\n  constructor(\n    private uri: string,\n    private options: UriSignerOptions = {},\n  ) {\n    super();\n  }\n\n  protected createPair(): KeyringPair {\n    return new Keyring({ ss58Format: CERE_SS58_PREFIX, type: this.type }).addFromUri(this.uri);\n  }\n\n  get type() {\n    return this.options.type || 'sr25519';\n  }\n\n  static async create(uri: string, options: UriSignerOptions = {}) {\n    const signer = new UriSigner(uri, options);\n    await signer.isReady();\n\n    return signer;\n  }\n}\n","import { Signer } from './Signer';\n\n// @ts-ignore\nexport class Web3Signer extends Signer {\n  constructor() {\n    super();\n\n    throw new Error('Web3Signer in not supported in NodeJS environment');\n  }\n}\n","import { Signer } from './Signer';\n\n// @ts-ignore\nexport class CereWalletSigner extends Signer {\n  constructor() {\n    super();\n\n    throw new Error('CereWalletSigner in not supported in NodeJS environment');\n  }\n}\n","import { KeyringPair, KeyringPair$Json } from '@polkadot/keyring/types';\nimport { Keyring } from '@polkadot/keyring';\n\nimport { KeyringSigner } from './KeyringSigner';\nimport { CERE_SS58_PREFIX } from '../constants';\n\ntype JsonSignerOptions = {\n  passphrase?: string;\n};\n\n/**\n * Signer that uses a JSON object to create a keypair.\n *\n * @group Signers\n * @extends Signer\n * @example\n *\n * ```typescript\n * const accountDataJson = {}; // Exported from Cere Wallet or other wallets\n * const jsonSigner = new JsonSigner(accountDataJson, { passphrase: '1234' });\n * const signature = await jsonSigner.sign('data');\n *\n * console.log(signature);\n * ```\n */\nexport class JsonSigner extends KeyringSigner {\n  constructor(\n    private account: KeyringPair$Json,\n    private options: JsonSignerOptions = {},\n  ) {\n    super();\n  }\n\n  protected createPair(): KeyringPair {\n    const keyPair = new Keyring({ ss58Format: CERE_SS58_PREFIX }).addFromJson(this.account);\n\n    if (this.options.passphrase) {\n      keyPair.unlock(this.options.passphrase);\n    }\n\n    return keyPair;\n  }\n\n  static async create(account: KeyringPair$Json) {\n    const signer = new JsonSigner(account);\n    await signer.isReady();\n\n    return signer;\n  }\n}\n","import { ApiPromise } from '@polkadot/api';\nimport { Sendable } from './Blockchain';\nimport type { StorageNode, StorageNodeProps, StorageNodePublicKey } from './types';\nimport { hexToString, stringToHex } from '@polkadot/util';\n\n/**\n * This class provides methods to interact with the DDC Nodes pallet on the blockchain.\n *\n * @group Pallets\n * @example\n *\n * ```typescript\n * const storageNodePublicKey = '0x...';\n * const storageNode = await blockchain.ddcNodes.findStorageNodeByPublicKey(storageNodePublicKey);\n *\n * console.log(storageNode);\n * ```\n */\nexport class DDCNodesPallet {\n  constructor(private apiPromise: ApiPromise) {}\n\n  /**\n   * Creates a new storage node.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @param storageNodeProps - The properties of the storage node.\n   * @returns An extrinsic to create the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const storageNodeProps = { ... };\n   * const tx = blockchain.ddcNodes.createStorageNode(storageNodePublicKey, storageNodeProps);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  createStorageNode(storageNodePublicKey: StorageNodePublicKey, storageNodeProps: StorageNodeProps) {\n    const defaultProps: Partial<StorageNodeProps> = {\n      domain: '',\n      ssl: false,\n    };\n\n    return this.apiPromise.tx.ddcNodes.createNode(\n      { StoragePubKey: storageNodePublicKey },\n      { StorageParams: encodeNodeProps({ ...defaultProps, ...storageNodeProps }) },\n    ) as Sendable;\n  }\n\n  /**\n   * Finds a storage node by public key.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns A promise that resolves to the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const storageNode = await blockchain.ddcNodes.findStorageNodeByPublicKey(storageNodePublicKey);\n   *\n   * console.log(storageNode);\n   * ```\n   */\n  async findStorageNodeByPublicKey(storageNodePublicKey: StorageNodePublicKey) {\n    const result = await this.apiPromise.query.ddcNodes.storageNodes(storageNodePublicKey);\n    const storageNode = result.toJSON() as unknown as StorageNode | undefined;\n    return storageNode == null\n      ? undefined\n      : ({ ...storageNode, props: decodeNodeProps(storageNode.props) } as StorageNode);\n  }\n\n  /**\n   * Returns a list of storage nodes.\n   *\n   * @returns A promise that resolves to a list of storage nodes.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodes = await blockchain.ddcNodes.listStorageNodes();\n   *\n   * console.log(storageNodes);\n   * ```\n   */\n  async listStorageNodes() {\n    const result = await this.apiPromise.query.ddcNodes.storageNodes.entries();\n\n    return result\n      .map(([, storageNodeOption]) => {\n        const storageNode = storageNodeOption.toJSON() as unknown as StorageNode | undefined;\n        return storageNode == null\n          ? undefined\n          : ({ ...storageNode, props: decodeNodeProps(storageNode.props) } as StorageNode);\n      })\n      .filter((storageNode) => storageNode != null) as StorageNode[];\n  }\n\n  /**\n   * Sets the properties of a storage node.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @param storageNodeProps - The properties of the storage node.\n   * @returns An extrinsic to set the storage node properties.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const storageNodeProps = { ... };\n   * const tx = blockchain.ddcNodes.setStorageNodeProps(storageNodePublicKey, storageNodeProps);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  setStorageNodeProps(storageNodePublicKey: StorageNodePublicKey, storageNodeProps: StorageNodeProps) {\n    return this.apiPromise.tx.ddcNodes.setNodeParams(\n      { StoragePubKey: storageNodePublicKey },\n      { StorageParams: encodeNodeProps(storageNodeProps) },\n    ) as Sendable;\n  }\n\n  /**\n   * Deletes a storage node.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns An extrinsic to delete the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const tx = blockchain.ddcNodes.deleteStorageNode(storageNodePublicKey);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  deleteStorageNode(storageNodePublicKey: StorageNodePublicKey) {\n    return this.apiPromise.tx.ddcNodes.deleteNode({ StoragePubKey: storageNodePublicKey }) as Sendable;\n  }\n}\n\nfunction decodeNodeProps(nodeProps: StorageNodeProps): StorageNodeProps {\n  return {\n    ...nodeProps,\n    host: hexToString(nodeProps.host),\n    domain: hexToString(nodeProps.domain),\n  };\n}\n\nfunction encodeNodeProps(nodeProps: StorageNodeProps): StorageNodeProps {\n  return {\n    ...nodeProps,\n    host: stringToHex(nodeProps.host),\n    domain: stringToHex(nodeProps.domain),\n  };\n}\n","import { ApiPromise } from '@polkadot/api';\nimport { Sendable } from './Blockchain';\nimport {\n  AccountId,\n  Cluster,\n  ClusterProtocolParams,\n  ClusterId,\n  ClusterNodeKind,\n  ClusterParams,\n  StorageNodePublicKey,\n} from './types';\n\n/**\n * This class provides methods to interact with the DDC Clusters pallet on the blockchain.\n *\n * @group Pallets\n * @example\n *\n * ```typescript\n * const clusters = await blockchain.ddcClusters.listClusters();\n *\n * console.log(clusters);\n * ```\n */\nexport class DDCClustersPallet {\n  constructor(private apiPromise: ApiPromise) {}\n\n  /**\n   * Lists all clusters.\n   *\n   * @returns A promise that resolves to an array of clusters.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusters = await blockchain.ddcClustersPallet.listClusters();\n   *\n   * console.log(clusters);\n   * ```\n   */\n  async listClusters() {\n    const entries = (await this.apiPromise.query.ddcClusters?.clusters.entries()) || [];\n\n    return entries.map(([, clusterOption]) => clusterOption.toJSON() as unknown as Cluster);\n  }\n\n  /**\n   * Filters node keys by cluster ID.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns A promise that resolves to an array of node keys.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const nodeKeys = await blockchain.ddcClustersPallet.filterNodeKeysByClusterId(clusterId);\n   *\n   * console.log(nodeKeys);\n   * ```\n   */\n  async filterNodeKeysByClusterId(clusterId: ClusterId) {\n    const entries = await this.apiPromise.query.ddcClusters.clustersNodes.entries(clusterId);\n\n    return entries.map(([key]: any) => key.args[1].asStoragePubKey.toJSON() as StorageNodePublicKey);\n  }\n\n  /**\n   * Checks if a cluster has a storage node.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns A promise that resolves to a boolean indicating whether the cluster has the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const storageNodePublicKey = '0x...';\n   * const hasStorageNode = await blockchain.ddcClustersPallet.clusterHasStorageNode(clusterId, storageNodePublicKey);\n   *\n   * console.log(hasStorageNode);\n   * ```\n   */\n  async clusterHasStorageNode(clusterId: ClusterId, storageNodePublicKey: StorageNodePublicKey) {\n    const result = await this.apiPromise.query.ddcClusters.clustersNodes(clusterId, {\n      StoragePubKey: storageNodePublicKey,\n    });\n\n    return !result.isEmpty;\n  }\n\n  /**\n   * Creates a new cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param clusterManagerId - The ID of the cluster manager.\n   * @param clusterReserveId - The ID of the cluster reserve.\n   * @param clusterParams - The properties of the cluster.\n   * @param clusterGovernmentParams - The government parameters of the cluster.\n   * @returns An extrinsic to create the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const clusterReserveId = '0x...';\n   * const clusterParams = { ... };\n   * const clusterGovernmentParams = { ... };\n   *\n   * const tx = blockchain.ddcClustersPallet.createCluster(\n   *   clusterId,\n   *   clusterReserveId,\n   *   clusterParams,\n   *   clusterGovernmentParams\n   * );\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  createCluster(\n    clusterId: ClusterId,\n    clusterReserveId: AccountId,\n    clusterParams: Partial<ClusterParams>,\n    clusterGovernmentParams: ClusterProtocolParams,\n  ) {\n    const clusterParamsDefaults: ClusterParams = {\n      nodeProviderAuthContract: null,\n      erasureCodingRequired: 16,\n      erasureCodingTotal: 48,\n      replicationTotal: 20,\n    };\n\n    return this.apiPromise.tx.ddcClusters.createCluster(\n      clusterId,\n      clusterReserveId,\n      { ...clusterParamsDefaults, ...clusterParams },\n      clusterGovernmentParams,\n    ) as Sendable;\n  }\n\n  /**\n   * Finds a cluster by ID.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns A promise that resolves to the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const cluster = await blockchain.ddcClustersPallet.findClusterById(clusterId);\n   *\n   * console.log(cluster);\n   * ```\n   */\n  async findClusterById(clusterId: ClusterId) {\n    const result = await this.apiPromise.query.ddcClusters.clusters(clusterId);\n    return result.toJSON() as unknown as Cluster;\n  }\n\n  /**\n   * Sets the properties of a cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param clusterParams - The properties of the cluster.\n   * @returns An extrinsic to set the cluster properties.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const clusterParams = { ... };\n   *\n   * const tx = blockchain.ddcClustersPallet.setClusterParams(clusterId, clusterParams);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  setClusterParams(clusterId: ClusterId, clusterParams: Partial<ClusterParams>) {\n    return this.apiPromise.tx.ddcClusters.setClusterParams(clusterId, clusterParams) as Sendable;\n  }\n\n  /**\n   * Adds a storage node to a cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns An extrinsic to add the storage node to the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const storageNodePublicKey = '0x...';\n   *\n   * const tx = blockchain.ddcClustersPallet.addStorageNodeToCluster(clusterId, storageNodePublicKey, ClusterNodeKind.Genesis);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  addStorageNodeToCluster(clusterId: ClusterId, storageNodePublicKey: StorageNodePublicKey, nodeKind: ClusterNodeKind) {\n    return this.apiPromise.tx.ddcClusters.addNode(\n      clusterId,\n      { StoragePubKey: storageNodePublicKey },\n      nodeKind,\n    ) as Sendable;\n  }\n\n  /**\n   * Removes a storage node from a cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns An extrinsic to remove the storage node from the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const storageNodePublicKey = '0x...';\n   *\n   * const tx = blockchain.ddcClustersPallet.removeStorageNodeFromCluster(clusterId, storageNodePublicKey);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  removeStorageNodeFromCluster(clusterId: ClusterId, storageNodePublicKey: StorageNodePublicKey) {\n    return this.apiPromise.tx.ddcClusters.removeNode(clusterId, { StoragePubKey: storageNodePublicKey }) as Sendable;\n  }\n\n  /**\n   * Gets the government parameters of a cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns A promise that resolves to the government parameters of the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const clusterGovernmentParams = await blockchain.ddcClustersPallet.getClusterGovernmentParams(clusterId);\n   *\n   * console.log(clusterGovernmentParams);\n   * ```\n   */\n  async getClusterGovernmentParams(clusterId: ClusterId) {\n    const result = await this.apiPromise.query.ddcClusters.clustersGovParams(clusterId);\n    return result.toJSON() as unknown as ClusterProtocolParams | undefined;\n  }\n}\n","import { ApiPromise } from '@polkadot/api';\nimport { Sendable } from './Blockchain';\nimport type { AccountId, Amount, ClusterId, StakingLedger, StorageNodePublicKey } from './types';\n\n/**\n * This class provides methods to interact with the DDC Staking pallet on the blockchain.\n *\n * @group Pallets\n * @example\n *\n * ```typescript\n * const storageNodePublicKey = '0x...';\n * const stashAccountId = await blockchain.ddcStaking.findStashAccountIdByStorageNodePublicKey(storageNodePublicKey);\n *\n * console.log(stashAccountId);\n * ```\n */\nexport class DDCStakingPallet {\n  constructor(private apiPromise: ApiPromise) {}\n\n  /**\n   * Binds the storage node.\n   *\n   * @param controller - The account that will control the storage node.\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @param bondAmount - The amount to bond.\n   * @returns An extrinsic to bind the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const controller = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const storageNodePublicKey = '0x...';\n   * const bondAmount = 100n;\n   * const tx = blockchain.ddcStaking.bondStorageNode(controller, storageNodePublicKey, bondAmount);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  bondStorageNode(controller: AccountId, storageNodePublicKey: StorageNodePublicKey, bondAmount: Amount) {\n    return this.apiPromise.tx.ddcStaking.bond(\n      controller,\n      { StoragePubKey: storageNodePublicKey },\n      bondAmount,\n    ) as Sendable;\n  }\n\n  /**\n   * Chills the controller.\n   *\n   * @returns An extrinsic to chill the controller.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcStaking.chill();\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  chill() {\n    return this.apiPromise.tx.ddcStaking.chill() as Sendable;\n  }\n\n  /**\n   * Initiates a fast chill of storage.\n   *\n   * @returns An extrinsic to initiate a fast chill of storage.\n   *\n   * Example usage:\n   * ```typescript\n   * const tx = blockchain.ddcStaking.fastChillStorage();\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  fastChillStorage() {\n    return this.apiPromise.tx.ddcStaking.fastChill() as Sendable;\n  }\n\n  /**\n   * Unbonds the amount.\n   *\n   * @param amount - The amount to unbond.\n   * @returns An extrinsic to unbond the amount.\n   *\n   * @example\n   *\n   * ```typescript\n   * const amount = 100n;\n   * const tx = blockchain.ddcStaking.unbond(amount);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  unbond(amount: Amount) {\n    return this.apiPromise.tx.ddcStaking.unbond(amount) as Sendable;\n  }\n\n  /**\n   * Withdraws unbonded funds.\n   *\n   * @returns An extrinsic to withdraw unbonded funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcStaking.withdrawUnbonded();\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  withdrawUnbonded() {\n    return this.apiPromise.tx.ddcStaking.withdrawUnbonded() as Sendable;\n  }\n\n  /**\n   * Finds the stash account ID associated with a given storage node public key.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns A promise that resolves to the stash account ID, or undefined if no stash account is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const stashAccountId = await blockchain.ddcStaking.findStashAccountIdByStorageNodePublicKey(storageNodePublicKey);\n   *\n   * console.log(stashAccountId);\n   * ```\n   */\n  async findStashAccountIdByStorageNodePublicKey(storageNodePublicKey: StorageNodePublicKey) {\n    const result = await this.apiPromise.query.ddcStaking.nodes({ StoragePubKey: storageNodePublicKey });\n    return result.toJSON() as unknown as AccountId | undefined;\n  }\n\n  /**\n   * Returns the list of staked storage nodes, their stash accounts, and their cluster IDs.\n   *\n   * @returns A promise that resolves to the list of staked storage nodes, their stash accounts, and their cluster IDs.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stakedStorageNodes = await blockchain.ddcStaking.listStakedStorageNodesStashAccountsAndClusterIds();\n   *\n   * console.log(stakedStorageNodes);\n   * ```\n   */\n  async listStakedStorageNodesStashAccountsAndClusterIds() {\n    const result = await this.apiPromise.query.ddcStaking.storages.entries();\n    return result.map(([key, clusterId]) => ({\n      stashAccountId: key.args[0].toJSON() as unknown as AccountId,\n      clusterId: clusterId.toJSON() as unknown as ClusterId,\n    }));\n  }\n\n  /**\n   * Finds the cluster ID associated with a given CDN node stash account ID.\n   *\n   * @param stashAccountId - The stash account ID of the CDN node.\n   * @returns A promise that resolves to the cluster ID, or undefined if no cluster is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stashAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const clusterId = await blockchain.ddcStaking.findStakedClusterIdByCdnNodeStashAccountId(stashAccountId);\n   *\n   * console.log(clusterId);\n   * ```\n   */\n  async findStakedClusterIdByCdnNodeStashAccountId(stashAccountId: AccountId) {\n    const result = await this.apiPromise.query.ddcStaking.cdNs(stashAccountId);\n    return result.toJSON() as unknown as ClusterId | undefined;\n  }\n\n  /**\n   * Returns the list of staked CDN nodes, their stash accounts, and their cluster IDs.\n   *\n   * @returns A promise that resolves to the list of staked CDN nodes, their stash accounts, and their cluster IDs.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stakedCdnNodes = await blockchain.ddcStaking.listStakedCdnNodesStashAccountsAndClusterIds();\n   *\n   * console.log(stakedCdnNodes);\n   * ```\n   */\n  async listStakedCdnNodesStashAccountsAndClusterIds() {\n    const result = await this.apiPromise.query.ddcStaking.cdNs.entries();\n    return result.map(([key, clusterId]) => ({\n      stashAccountId: key.args[0].toJSON() as unknown as AccountId,\n      clusterId: clusterId.toJSON() as unknown as ClusterId,\n    }));\n  }\n\n  /**\n   * Finds the cluster ID associated with a given storage node stash account ID.\n   *\n   * @param stashAccountId - The stash account ID of the storage node.\n   * @returns A promise that resolves to the cluster ID, or undefined if no cluster is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stashAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const clusterId = await blockchain.ddcStaking.findStakedClusterIdByStorageNodeStashAccountId(stashAccountId);\n   *\n   * console.log(clusterId);\n   * ```\n   */\n  async findStakedClusterIdByStorageNodeStashAccountId(stashAccountId: AccountId) {\n    const result = await this.apiPromise.query.ddcStaking.storages(stashAccountId);\n    return result.toJSON() as unknown as ClusterId | undefined;\n  }\n\n  /**\n   * Sets the controller account for the stash account.\n   *\n   * @param accountId - The account ID of the new controller.\n   * @returns An extrinsic to set the controller account.\n   *\n   * @example\n   *\n   * ```typescript\n   * const newControllerAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const tx = blockchain.ddcStaking.setController(newControllerAccountId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  setController(accountId: AccountId) {\n    return this.apiPromise.tx.ddcStaking.setController(accountId) as Sendable;\n  }\n\n  /**\n   * Sets the storage node for the stash account.\n   *\n   * @param storageNodePublicKey - The public key of the storage node.\n   * @returns An extrinsic to set the storage node.\n   *\n   * @example\n   *\n   * ```typescript\n   * const storageNodePublicKey = '0x...';\n   * const tx = blockchain.ddcStaking.setStorageNode(storageNodePublicKey);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  setStorageNode(storageNodePublicKey: StorageNodePublicKey) {\n    return this.apiPromise.tx.ddcStaking.setNode({ StoragePubKey: storageNodePublicKey }) as Sendable;\n  }\n\n  /**\n   * Stores the cluster ID.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns An extrinsic to store the cluster ID.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcStaking.store(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  store(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcStaking.store(clusterId) as Sendable;\n  }\n\n  /**\n   * Serves the cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns An extrinsic to serve the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcStaking.serve(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  serve(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcStaking.serve(clusterId) as Sendable;\n  }\n\n  /**\n   * Finds the staking ledger associated with a given controller account ID.\n   *\n   * @param controllerAccountId - The account ID of the controller.\n   * @returns A promise that resolves to the staking ledger, or undefined if no staking ledger is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const controllerAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const stakingLedger = await blockchain.ddcStaking.findStakingLedgerByControllerAccountId(controllerAccountId);\n   *\n   * console.log(stakingLedger);\n   * ```\n   */\n  async findStakingLedgerByControllerAccountId(controllerAccountId: AccountId) {\n    const result = await this.apiPromise.query.ddcStaking.ledger(controllerAccountId);\n    return result.toJSON() as unknown as StakingLedger | undefined;\n  }\n\n  /**\n   * Finds the controller account associated with a given stash account ID.\n   *\n   * @param stashAccountId - The account ID of the stash.\n   * @returns A promise that resolves to the controller account ID, or undefined if no controller account is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stashAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const controllerAccountId = await blockchain.ddcStaking.findControllerAccountByStashAccountId(stashAccountId);\n   *\n   * console.log(controllerAccountId);\n   * ```\n   */\n  async findControllerAccountByStashAccountId(stashAccountId: AccountId) {\n    const result = await this.apiPromise.query.ddcStaking.bonded(stashAccountId);\n    return result.toJSON() as unknown as AccountId | undefined;\n  }\n\n  /**\n   * Finds the node public key associated with a given stash account ID.\n   *\n   * @param stashAccountId - The account ID of the stash.\n   * @returns A promise that resolves to the node public key, or undefined if no node public key is found.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stashAccountId = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n   * const nodePublicKey = await blockchain.ddcStaking.findNodePublicKeyByStashAccountId(stashAccountId);\n   *\n   * console.log(nodePublicKey);\n   * ```\n   */\n  async findNodePublicKeyByStashAccountId(stashAccountId: AccountId) {\n    const result = await this.apiPromise.query.ddcStaking.providers(stashAccountId);\n\n    return result.toJSON() as unknown as { storagePubKey: StorageNodePublicKey } | undefined;\n  }\n\n  /**\n   * Bonds the cluster.\n   *\n   * @param clusterId - The cluster ID to bond\n   * @returns An extrinsic to bond the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcStaking.bondCluster(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  bondCluster(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcStaking.bondCluster(clusterId) as Sendable;\n  }\n\n  /**\n   * Unbonds the cluster.\n   *\n   * @param clusterId - The cluster ID to bond\n   * @returns An extrinsic to unbond the cluster.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcStaking.unbondCluster(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  unbondCluster(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcStaking.unbondCluster(clusterId) as Sendable;\n  }\n\n  /**\n   * Withdraws unbonded cluster funds.\n   *\n   * @param clusterId - The cluster ID to withdraw\n   * @returns An extrinsic to withdraw the cluster funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcStaking.withdrawUnbondedCluster(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  withdrawUnbondedCluster(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcStaking.withdrawUnbondedCluster(clusterId) as Sendable;\n  }\n}\n","import { ApiPromise } from '@polkadot/api';\n\nimport { Sendable, Event } from './Blockchain';\nimport type { AccountId, Bucket, BucketId, BucketParams, ClusterId, StakingInfo } from './types';\n\n/**\n * This class provides methods to interact with the DDC Customers pallet on the blockchain.\n *\n * @group Pallets\n * @example\n *\n * ```typescript\n * const bucket = await blockchain.ddcCustomers.getBucket(1n);\n *\n * console.log(bucket);\n * ```\n */\nexport class DDCCustomersPallet {\n  constructor(private apiPromise: ApiPromise) {}\n\n  /**\n   * Returns the bucket with the given ID.\n   *\n   * @param bucketId - The ID of the bucket.\n   * @returns A promise that resolves to the bucket.\n   *\n   * @example\n   *\n   * ```typescript\n   * const bucket = await blockchain.ddcCustomers.getBucket(1n);\n   *\n   * console.log(bucket);\n   * ```\n   */\n  async getBucket(bucketId: BucketId) {\n    const result = await this.apiPromise.query.ddcCustomers.buckets(bucketId);\n    const bucket = result.toJSON() as unknown as Bucket | undefined;\n    return bucket == null ? undefined : ({ ...bucket, bucketId: BigInt(bucket.bucketId) } as Bucket);\n  }\n\n  /**\n   * Returns the number of buckets.\n   *\n   * @returns A promise that resolves to the number of buckets.\n   *\n   * @example\n   *\n   * ```typescript\n   * const bucketsCount = await blockchain.ddcCustomers.getBucketsCount();\n   *\n   * console.log(bucketsCount);\n   * ```\n   */\n  async getBucketsCount() {\n    const result = await this.apiPromise.query.ddcCustomers.bucketsCount();\n    return result.toJSON() as number;\n  }\n\n  /**\n   * Returns the staking info for the given account in the specified cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param accountId - The ID of the account.\n   * @returns A promise that resolves to the staking info.\n   *\n   * @example\n   *\n   * ```typescript\n   * const stakingInfo = await blockchain.ddcCustomers.getStackingInfo('0x...', '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu');\n   *\n   * console.log(stakingInfo);\n   * ```\n   */\n  async getStackingInfo(clusterId: ClusterId, accountId: AccountId) {\n    const result = await this.apiPromise.query.ddcCustomers.clusterLedger(clusterId, accountId);\n    return result.toJSON() as unknown as StakingInfo | undefined;\n  }\n\n  /**\n   * Returns the staking info for the given account (legacy method - deprecated).\n   * This method is deprecated because the storage has migrated to cluster-based ledger.\n   * Use getStackingInfo(clusterId, accountId) instead.\n   *\n   * @deprecated Use getStackingInfo(clusterId, accountId) instead.\n   * @param accountId - The ID of the account.\n   * @returns A promise that resolves to the staking info.\n   */\n  async getStackingInfoLegacy(accountId: AccountId) {\n    // For backward compatibility, try to get from the first available cluster\n    // This is a fallback and should not be used in new code\n    const result = await this.apiPromise.query.ddcCustomers.ledger(accountId);\n    return result.toJSON() as unknown as StakingInfo | undefined;\n  }\n\n  /**\n   * Creates a new bucket.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param params - The bucket parameters.\n   * @returns An extrinsic to create the bucket.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.createBucket('0x...', { isPublic: true });\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  createBucket(clusterId: ClusterId, params: BucketParams) {\n    return this.apiPromise.tx.ddcCustomers.createBucket(clusterId, params) as unknown as Sendable;\n  }\n\n  /**\n   * Sets the parameters of the bucket with the given ID.\n   *\n   * @param bucketId - The ID of the bucket.\n   * @param params - The bucket parameters.\n   * @returns An extrinsic to set the bucket parameters.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.setBucketParams(1n, { isPublic: true });\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  setBucketParams(bucketId: BucketId, params: BucketParams) {\n    return this.apiPromise.tx.ddcCustomers.setBucketParams(bucketId, params) as unknown as Sendable;\n  }\n\n  /**\n   * Deposits funds to the account for the specified cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param value - The amount to deposit.\n   * @returns An extrinsic to deposit funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.deposit('0x...', 100n);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  deposit(clusterId: ClusterId, value: bigint) {\n    return this.apiPromise.tx.ddcCustomers.deposit(clusterId, value) as unknown as Sendable;\n  }\n\n  /**\n   * Deposits additional funds to the account for the specified cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param maxAdditional - The maximum amount to deposit.\n   * @returns An extrinsic to deposit additional funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.depositExtra('0x...', 100n);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  depositExtra(clusterId: ClusterId, maxAdditional: bigint) {\n    return this.apiPromise.tx.ddcCustomers.depositExtra(clusterId, maxAdditional) as unknown as Sendable;\n  }\n\n  /**\n   * Deposits funds to the target address for the specified cluster.\n   * This allows a third party to deposit funds on behalf of another address.\n   *\n   * @param targetAddress - The target address to deposit funds for.\n   * @param clusterId - The ID of the cluster.\n   * @param amount - The amount to deposit.\n   * @returns An extrinsic to deposit funds for the target address.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.depositFor('5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu', '0x...', 100n);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  depositFor(targetAddress: AccountId, clusterId: ClusterId, amount: bigint) {\n    return this.apiPromise.tx.ddcCustomers.depositFor(targetAddress, clusterId, amount) as unknown as Sendable;\n  }\n\n  /**\n   * Unlocks deposit funds from the account for the specified cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param value - The amount to unlock.\n   * @returns An extrinsic to unlock deposit funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.unlockDeposit('0x...', 100n);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  unlockDeposit(clusterId: ClusterId, value: bigint) {\n    return this.apiPromise.tx.ddcCustomers.unlockDeposit(clusterId, value) as unknown as Sendable;\n  }\n\n  /**\n   * Withdraws unlocked funds from the account for the specified cluster.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns An extrinsic to withdraw unlocked funds.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.withdrawUnlockedDeposit('0x...');\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  withdrawUnlockedDeposit(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcCustomers.withdrawUnlockedDeposit(clusterId) as unknown as Sendable;\n  }\n\n  /**\n   * Returns the list of buckets.\n   *\n   * @returns A promise that resolves to the list of buckets.\n   *\n   * @example\n   *\n   * ```typescript\n   * const buckets = await blockchain.ddcCustomers.listBuckets();\n   *\n   * console.log(buckets);\n   * ```\n   */\n  async listBuckets() {\n    const entries = (await this.apiPromise.query.ddcCustomers?.buckets.entries()) || [];\n    return entries\n      .map(([, bucketOption]) => {\n        const bucket = bucketOption.toJSON() as unknown as Bucket | undefined;\n        return bucket == null ? undefined : ({ ...bucket, bucketId: BigInt(bucket.bucketId) } as Bucket);\n      })\n      .filter((bucket) => bucket !== undefined) as Bucket[];\n  }\n\n  /**\n   * Extracts the IDs of the created buckets from the given events.\n   *\n   * @param events - The events to extract the bucket IDs from.\n   * @returns The IDs of the created buckets.\n   *\n   * @example\n   *\n   * ```typescript\n   * const bucketIds = blockchain.ddcCustomers.extractCreatedBucketIds(events);\n   *\n   * console.log(bucketIds);\n   * ```\n   */\n  extractCreatedBucketIds(events: Event[]) {\n    return events\n      .filter((event) => event.section === 'ddcCustomers' && event.method === 'BucketCreated')\n      .map((event) => event.payload?.bucket_id)\n      .filter(Boolean)\n      .map(BigInt);\n  }\n\n  /**\n   * Mark existing buckets with specified bucket ids as removed.\n   *\n   * @param bucketIds - The IDs of the buckets to remove.\n   * @returns An extrinsic to remove the buckets.\n   *\n   * @example\n   *\n   * ```typescript\n   * const tx = blockchain.ddcCustomers.removeBuckets(1n, 2n);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  removeBuckets(...bucketIds: BucketId[]) {\n    if (bucketIds.length === 0) {\n      throw new Error('At least one bucket ID must be provided');\n    } else if (bucketIds.length === 1) {\n      return this.apiPromise.tx.ddcCustomers.removeBucket(bucketIds[0]) as unknown as Sendable;\n    }\n\n    return this.apiPromise.tx.utility.batch(\n      bucketIds.map((bucketId) => this.apiPromise.tx.ddcCustomers.removeBucket(bucketId)),\n    ) as unknown as Sendable;\n  }\n\n  /**\n   * Extracts the IDs of the removed buckets from the given events.\n   *\n   * @param events - The events to extract the bucket IDs from.\n   * @returns The IDs of the removed buckets.\n   *\n   * @example\n   *\n   * ```typescript\n   * const bucketIds = blockchain.ddcCustomers.extractRemovedBucketIds(events);\n   *\n   * console.log(bucketIds);\n   * ```\n   */\n  extractRemovedBucketIds(events: Event[]) {\n    return events\n      .filter((event) => event.section === 'ddcCustomers' && event.method === 'BucketRemoved')\n      .map((event) => event.payload?.bucket_id)\n      .filter(Boolean)\n      .map(BigInt);\n  }\n}\n","import { ApiPromise } from '@polkadot/api';\nimport { Sendable } from './Blockchain';\nimport { ClusterId, ClusterMember, ClusterProtocolParams, NodePublicKey, ReferendumIndex } from './types';\n\n/**\n * This class provides methods to interact with the DDC Cluster Goverment pallet on the blockchain.\n *\n * @group Pallets\n * @example\n *\n * ```typescript\n * const clusterId = '0x...';\n * const protocolParams = { ... };\n * const member = ClusterMember.ClusterManager;\n *\n * const tx = blockchain.ddcClusterGov.proposeUpdateClusterProtocol(clusterId, protocolParams, member);\n *\n * await blockchain.send(tx, { account });\n * ```\n */\nexport class DDCClustersGovPallet {\n  constructor(private apiPromise: ApiPromise) {}\n\n  /**\n   * Creates a local proposal within a cluster, intended to activate the cluster in the network with specific protocol parameters such as validators, treasury fees, and pricing for stored and streamed bytes.\n   * Only cluster members, namely the cluster manager and node providers, have voting rights on this proposal.\n   * Furthermore, only the cluster manager has the authority to create this type of proposal.\n   *\n   * @param clusterId - The ID of the cluster.\n   */\n  proposeActivateClusterProtocol(clusterId: ClusterId, protocolParams: ClusterProtocolParams) {\n    return this.apiPromise.tx.ddcClusterGov.proposeActivateClusterProtocol(clusterId, protocolParams) as Sendable;\n  }\n\n  /**\n   * Creates a local proposal within a cluster, intended to update protocol parameters (like validators, treasury fee, pricing for stored and streamed bytes, etc.) of a previously activated cluster in the network.\n   * Only cluster members, such as the cluster manager and node providers, can vote on this type of proposal.\n   * Any cluster member has the ability to create this type of proposal.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param protocolParams - The new protocol parameters.\n   * @param member - The member who is creating the proposal.\n   * @param nodePublicKey - The public key of the node provider. Needed in case the member is ClusterMember.NodeProvider.\n   *\n   * @returns An extrinsic to propose the update of the cluster protocol.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const protocolParams = { ... };\n   * const member = ClusterMember.ClusterManager;\n   *\n   * const tx = blockchain.ddcClusterGov.proposeUpdateClusterProtocol(clusterId, protocolParams, member);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  proposeUpdateClusterProtocol(\n    clusterId: ClusterId,\n    protocolParams: ClusterProtocolParams,\n    member: ClusterMember,\n    nodePublicKey?: NodePublicKey,\n  ): Sendable {\n    return this.apiPromise.tx.ddcClusterGov.proposeUpdateClusterProtocol(\n      clusterId,\n      protocolParams,\n      this.createClusterMember(member, nodePublicKey),\n    ) as Sendable;\n  }\n\n  /**\n   * Votes for a local proposal within a cluster. Only cluster members, such as the cluster manager and node providers, are permitted to vote.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param approve - Whether to approve the proposal.\n   * @param member - The member who is voting.\n   * @param nodePublicKey - The public key of the node provider. Needed in case the member is ClusterMember.NodeProvider.\n   *\n   * @returns An extrinsic to vote on the proposal.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const approve = true;\n   * const member = ClusterMember.ClusterManager;\n   *\n   * const tx = blockchain.ddcClusterGov.voteProposal(clusterId, approve, member);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  voteProposal(clusterId: ClusterId, approve: boolean, member: ClusterMember, nodePublicKey?: NodePublicKey) {\n    return this.apiPromise.tx.ddcClusterGov.voteProposal(\n      clusterId,\n      approve,\n      this.createClusterMember(member, nodePublicKey),\n    ) as Sendable;\n  }\n\n  /**\n   * This method allows to retract a local proposal within a cluster. Only the proposal's author can submit it.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @param member - The member who is retracting the proposal.\n   * @param nodePublicKey - The public key of the node provider. Needed in case the member is ClusterMember.NodeProvider.\n   * @returns An extrinsic to retract the proposal.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const member = ClusterMember.ClusterManager;\n   *\n   * const tx = blockchain.ddcClusterGov.retractProposal(clusterId, member);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  closeProposal(clusterId: ClusterId, member: ClusterMember, nodePublicKey?: NodePublicKey) {\n    return this.apiPromise.tx.ddcClusterGov.closeProposal(\n      clusterId,\n      this.createClusterMember(member, nodePublicKey),\n    ) as Sendable;\n  }\n\n  /**\n   * Closes a local proposal within a cluster. If the required approval threshold is met, it will automatically initiate a public referendum in the OpenGov.\n   * Here, any CERE token holder can vote on the cluster's proposal, thereby influencing the network's economics.\n   * If the required approval threshold is not met, the local (internal) proposal will be withdrawn without initiating a public referendum.\n   * Any cluster member can close the proposal once the approval threshold or expiration time is reached.\n   *\n   * @param clusterId - The ID of the cluster.\n   * @returns An extrinsic to retract the proposal.\n   *\n   * @example\n   *\n   * ```typescript\n   * const clusterId = '0x...';\n   * const tx = blockchain.ddcClusterGov.retractProposal(clusterId);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  retractProposal(clusterId: ClusterId) {\n    return this.apiPromise.tx.ddcClusterGov.retractProposal(clusterId) as Sendable;\n  }\n\n  /**\n   * Refunds the submission deposit made by the proposal's author when creating a local proposal.\n   *\n   * @param referendaIndex - The index of the referendum.\n   *\n   * @returns An extrinsic to refund the submission deposit.\n   *\n   * @example\n   *\n   * ```typescript\n   * const referendaIndex = 0;\n   * const tx = blockchain.ddcClusterGov.refundSubmissionDeposit(referendaIndex);\n   *\n   * await blockchain.send(tx, { account });\n   * ```\n   */\n  refundSubmissionDeposit(referendaIndex: ReferendumIndex) {\n    return this.apiPromise.tx.ddcClusterGov.refundSubmissionDeposit(referendaIndex) as Sendable;\n  }\n\n  private createClusterMember(member: ClusterMember, nodePublicKey?: NodePublicKey) {\n    if (member === ClusterMember.ClusterManager) {\n      return ClusterMember.ClusterManager;\n    }\n\n    if (!nodePublicKey) {\n      throw new Error('Node public key is required to create a cluster member enum.');\n    }\n\n    return {\n      [ClusterMember.NodeProvider]: nodePublicKey,\n    };\n  }\n}\n","import { ApiPromise, WsProvider } from '@polkadot/api';\nimport { AddressOrPair, SignerOptions, ApiOptions } from '@polkadot/api/types';\nimport { Index, AccountInfo } from '@polkadot/types/interfaces';\nimport { SubmittableExtrinsic } from '@polkadot/api-base/types';\nimport { formatBalance } from '@polkadot/util';\n\nimport { AccountId } from './types';\nimport { Signer } from './Signer';\nimport { DDCNodesPallet } from './DDCNodesPallet';\nimport { DDCClustersPallet } from './DDCClustersPallet';\nimport { DDCStakingPallet } from './DDCStakingPallet';\nimport { DDCCustomersPallet } from './DDCCustomersPallet';\nimport { DDCClustersGovPallet } from './DDCClustersGovPallet';\n\nexport type SendOptions = Pick<Partial<SignerOptions>, 'nonce' | 'signer'> & {\n  account: AddressOrPair | Signer;\n};\n\nexport type BlockchainConnectOptions =\n  | {\n      apiPromise: ApiPromise;\n    }\n  | {\n      wsEndpoint: string;\n      apiOptions?: Omit<ApiOptions, 'provider'>;\n    };\n\n/**\n * This class provides methods to interact with the Cere blockchain.\n *\n * @group Blockchain\n * @example\n *\n * ```typescript\n * const blockchain = await Blockchain.connect({ wsEndpoint: 'wss://rpc.testnet.cere.network/ws' });\n * const account = '5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu';\n * const balance = await blockchain.getAccountFreeBalance(account);\n *\n * console.log(balance);\n * ```\n */\nexport class Blockchain {\n  readonly api: ApiPromise;\n\n  /**\n   * The DDC Nodes pallet.\n   *\n   * @category Pallets\n   */\n  readonly ddcNodes: DDCNodesPallet;\n\n  /**\n   * The DDC Clusters pallet.\n   *\n   * @category Pallets\n   */\n  readonly ddcClusters: DDCClustersPallet;\n\n  /**\n   * The DDC Staking pallet.\n   *\n   * @category Pallets\n   */\n  readonly ddcStaking: DDCStakingPallet;\n\n  /**\n   * The DDC Customers pallet.\n   *\n   * @category Pallets\n   */\n  readonly ddcCustomers: DDCCustomersPallet;\n\n  /**\n   * The DDC Cluster government pallet.\n   *\n   * @category Pallets\n   */\n  readonly ddcClustersGov: DDCClustersGovPallet;\n\n  constructor(options: BlockchainConnectOptions) {\n    this.api =\n      'apiPromise' in options\n        ? options.apiPromise\n        : new ApiPromise({\n            provider: new WsProvider(options.wsEndpoint),\n            ...options.apiOptions,\n          });\n\n    this.ddcNodes = new DDCNodesPallet(this.api);\n    this.ddcClusters = new DDCClustersPallet(this.api);\n    this.ddcStaking = new DDCStakingPallet(this.api);\n    this.ddcCustomers = new DDCCustomersPallet(this.api);\n    this.ddcClustersGov = new DDCClustersGovPallet(this.api);\n  }\n\n  /**\n   * Connects to the blockchain and returns a new instance of the Blockchain class.\n   *\n   * @param options - Options for connecting to the blockchain.\n   * @returns A promise that resolves to a new instance of the Blockchain class.\n   *\n   * Example usage:\n   * ```typescript\n   * const blockchain = await Blockchain.connect({ wsEndpoint: 'wss://rpc.testnet.cere.network/ws' });\n   * ```\n   */\n  static async connect(options: BlockchainConnectOptions) {\n    const blockchain = new Blockchain(options);\n    await blockchain.isReady();\n\n    return blockchain;\n  }\n\n  /**\n   * Checks if the blockchain is ready.\n   *\n   * @returns A promise that resolves to `true` if the blockchain is ready.\n   *\n   * @example\n   * ```typescript\n   * const isReady = await blockchain.isReady();\n   * console.log(isReady);\n   * ```\n   */\n  async isReady() {\n    await this.api.isReady;\n\n    return true;\n  }\n\n  /**\n   * The decimals of the chain's native token.\n   */\n  get chainDecimals() {\n    const [decimals] = this.api.registry.chainDecimals;\n\n    return decimals;\n  }\n\n  /**\n   * Retrieves the next nonce for an account.\n   *\n   * @param address - The address of the account.\n   * @returns A promise that resolves to the next nonce for the account.\n   *\n   * Example usage:\n   * ```typescript\n   * const nonce = await blockchain.getNextNonce('5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu');\n   *\n   * console.log(nonce);\n   * ```\n   */\n  async getNextNonce(address: string | AccountId) {\n    const nonce = await this.api.rpc.system.accountNextIndex<Index>(address);\n\n    return nonce.toNumber();\n  }\n\n  /**\n   * Sends a transaction to the blockchain.\n   *\n   * @param sendable - The transaction to send.\n   * @param options - Options for sending the transaction.\n   * @returns A promise that resolves to the result of the transaction.\n   *\n   * Example usage:\n   * ```typescript\n   * const account = new UriSigner('//Alice');\n   * const tx = blockchain.ddcCustomers.createBucket('0x...', { isPublic: true });\n   *\n   * const result = await blockchain.send(sendable, { account });\n   *\n   * console.log(result);\n   * ```\n   */\n  async send(sendable: Sendable, { account, nonce, signer }: SendOptions) {\n    let finalAccount: AddressOrPair;\n    let finalSigner = signer;\n\n    /**\n     * If the account is a Signer instance, we need to convert it to a blockchain signer\n     */\n    if (Signer.isSigner(account)) {\n      finalSigner ||= await account.getSigner();\n      finalAccount = account.address;\n    } else {\n      finalAccount = account;\n    }\n\n    return new Promise<SendResult>((resolve, reject) => {\n      sendable\n        .signAndSend(finalAccount, { nonce, signer: finalSigner }, (result) => {\n          if (result.status.isFinalized) {\n            const events: Event[] = result.events.map(({ event }) => ({\n              method: event.method,\n              section: event.section,\n              meta: event.meta.toJSON(),\n              data: event.data.toJSON(),\n              payload: Object.fromEntries(\n                event.meta.fields.map((field, index) => [field.name, event.data[index].toJSON()]),\n              ),\n            }));\n\n            resolve({\n              events,\n              txHash: result.status.asFinalized.toHex(),\n            });\n          } else if (result.dispatchError) {\n            let errorMessage: string;\n\n            if (result.dispatchError.isModule) {\n              const decoded = this.api.registry.findMetaError(result.dispatchError.asModule);\n              errorMessage = `${decoded.section}.${decoded.name}: ${decoded.docs.join(' ')}`;\n            } else {\n              errorMessage = result.dispatchError.toString();\n            }\n            reject(new Error(errorMessage));\n          }\n        })\n        .catch(reject);\n    });\n  }\n\n  /**\n   * Sends a batch of transactions to the blockchain.\n   * The transactions are sent in a single batch and are executed in the order they are provided.\n   * If one transaction in the batch fails, the rest of the transactions in the batch will still be processed. The batch itself does not fail.\n   *\n   * @param sendables - The transactions to send.\n   * @param options - Options for sending the transactions.\n   * @returns A promise that resolves to the result of the batch of transactions.\n   *\n   * @example\n   *\n   * ```typescript\n   * const account = new UriSigner('//Alice');\n   * const tx1 = blockchain.ddcCustomers.createBucket('0x...');\n   * const tx2 = blockchain.ddcCustomers.createBucket('0x...');\n   *\n   * const result = await blockchain.batchSend([tx1, tx2], { account });\n   *\n   * console.log(result);\n   * ```\n   */\n  batchSend(sendables: Sendable[], options: SendOptions) {\n    return this.send(this.api.tx.utility.batch(sendables), options);\n  }\n\n  /**\n   * Sends a batch of transactions to the blockchain.\n   * The transactions are sent in a single batch and are executed in the order they are provided.\n   * If one transaction in the batch fails, the entire batch fails and no further transactions in the batch are processed.\n   *\n   * @param sendables - The transactions to send.\n   * @param options - Options for sending the transactions.\n   * @returns A promise that resolves to the result of the batch of transactions.\n   *\n   * @example\n   *\n   * ```typescript\n   * const account = new UriSigner('//Alice');\n   * const tx1 = blockchain.ddcCustomers.createBucket('0x...');\n   * const tx2 = blockchain.ddcCustomers.createBucket('0x...');\n   *\n   * const result = await blockchain.batchAllSend([tx1, tx2], { account });\n   *\n   * console.log(result);\n   * ```\n   */\n  batchAllSend(sendables: Sendable[], options: SendOptions) {\n    return this.send(this.api.tx.utility.batchAll(sendables), options);\n  }\n\n  sudo(sendable: Sendable) {\n    return this.api.tx.sudo.sudo(sendable) as Sendable;\n  }\n\n  sudoAs(who: AccountId, sendable: Sendable) {\n    return this.api.tx.sudo.sudoAs(who, sendable) as Sendable;\n  }\n\n  /**\n   * Disconnects from the blockchain.\n   *\n   * @returns A promise that resolves when the connection is closed.\n   *\n   * @example\n   * ```typescript\n   * await blockchain.disconnect();\n   * ```\n   */\n  disconnect() {\n    return this.api.disconnect();\n  }\n\n  formatBalance(balance: string | number | bigint, withUnit: boolean | string = 'CERE') {\n    return formatBalance(balance, { withSiFull: true, decimals: this.chainDecimals, withUnit });\n  }\n\n  /**\n   * Retrieves the free balance of an account.\n   *\n   * @param accountId - The account ID.\n   * @returns A promise that resolves to the free balance of the account.\n   *\n   * @example\n   * ```typescript\n   * const balance = await blockchain.getAccountFreeBalance('5D5PhZQNJzcJXVBxwJxZcsutjKPqUPydrvpu6HeiBfMae2Qu');\n   *\n   * console.log(balance);\n   * ```\n   */\n  async getAccountFreeBalance(accountId: AccountId) {\n    const { data } = await this.api.query.system.account<AccountInfo>(accountId);\n    return data.free.toBigInt();\n  }\n\n  /**\n   * Retrieves the current block number.\n   *\n   * @returns A promise that resolves to the current block number.\n   *\n   * Example usage:\n   * ```typescript\n   * const blockchain = await Blockchain.connect({ wsEndpoint: 'wss://rpc.testnet.cere.network/ws' });\n   * const blockNumber = await blockchain.getCurrentBlockNumber();\n   *\n   * console.log(blockNumber);\n   * ```\n   */\n  async getCurrentBlockNumber() {\n    const { number } = await this.api.rpc.chain.getHeader();\n    return number.toNumber();\n  }\n}\n\nexport type Sendable = SubmittableExtrinsic<'promise'>;\n\nexport type SendResult = {\n  events: Event[];\n  txHash: string;\n};\n\nexport type Event = {\n  section: string;\n  method: string;\n  data?: any;\n  payload?: Record<string, any>;\n};\n","import * as cryptoUtil from '@polkadot/util-crypto';\n\nimport { CERE_SS58_PREFIX } from '../constants';\nimport { UriSigner, UriSignerOptions } from '../Signer';\n\nexport { cryptoWaitReady } from '@polkadot/util-crypto';\n\nexport const decodeAddress = (address: string, ignoreChecksum?: boolean) => {\n  return cryptoUtil.decodeAddress(address, ignoreChecksum, CERE_SS58_PREFIX);\n};\n\nexport const encodeAddress = (address: Uint8Array) => {\n  return cryptoUtil.encodeAddress(address, CERE_SS58_PREFIX);\n};\n\nexport const createRandomSigner = (options: UriSignerOptions = {}) => {\n  const uri = cryptoUtil.mnemonicGenerate();\n\n  return new UriSigner(uri, options);\n};\n"],"names":["ClusterStatus","ClusterMember","StorageNodeMode","ClusterNodeKind","Signer","unlock","passphrase","isSigner","signer","CERE_SS58_PREFIX","KeyringSigner","constructor","pair","isReady","isLocked","Error","createPair","isCryptoReady","cryptoWaitReady","getPair","type","address","publicKey","sign","data","getSigner","signRaw","signature","withType","id","u8aToHex","UriSigner","uri","options","Keyring","ss58Format","addFromUri","create","Web3Signer","CereWalletSigner","JsonSigner","account","keyPair","addFromJson","DDCNodesPallet","apiPromise","createStorageNode","storageNodePublicKey","storageNodeProps","defaultProps","domain","ssl","tx","ddcNodes","createNode","StoragePubKey","StorageParams","encodeNodeProps","findStorageNodeByPublicKey","result","query","storageNodes","storageNode","toJSON","undefined","props","decodeNodeProps","listStorageNodes","entries","map","storageNodeOption","filter","setStorageNodeProps","setNodeParams","deleteStorageNode","deleteNode","nodeProps","host","hexToString","stringToHex","DDCClustersPallet","listClusters","_this$apiPromise$quer","ddcClusters","clusters","clusterOption","filterNodeKeysByClusterId","clusterId","clustersNodes","key","args","asStoragePubKey","clusterHasStorageNode","isEmpty","createCluster","clusterReserveId","clusterParams","clusterGovernmentParams","clusterParamsDefaults","nodeProviderAuthContract","erasureCodingRequired","erasureCodingTotal","replicationTotal","findClusterById","setClusterParams","addStorageNodeToCluster","nodeKind","addNode","removeStorageNodeFromCluster","removeNode","getClusterGovernmentParams","clustersGovParams","DDCStakingPallet","bondStorageNode","controller","bondAmount","ddcStaking","bond","chill","fastChillStorage","fastChill","unbond","amount","withdrawUnbonded","findStashAccountIdByStorageNodePublicKey","nodes","listStakedStorageNodesStashAccountsAndClusterIds","storages","stashAccountId","findStakedClusterIdByCdnNodeStashAccountId","cdNs","listStakedCdnNodesStashAccountsAndClusterIds","findStakedClusterIdByStorageNodeStashAccountId","setController","accountId","setStorageNode","setNode","store","serve","findStakingLedgerByControllerAccountId","controllerAccountId","ledger","findControllerAccountByStashAccountId","bonded","findNodePublicKeyByStashAccountId","providers","bondCluster","unbondCluster","withdrawUnbondedCluster","DDCCustomersPallet","getBucket","bucketId","ddcCustomers","buckets","bucket","BigInt","getBucketsCount","bucketsCount","getStackingInfo","clusterLedger","getStackingInfoLegacy","createBucket","params","setBucketParams","deposit","value","depositExtra","maxAdditional","depositFor","targetAddress","unlockDeposit","withdrawUnlockedDeposit","listBuckets","bucketOption","extractCreatedBucketIds","events","event","section","method","_event$payload","payload","bucket_id","Boolean","removeBuckets","bucketIds","length","removeBucket","utility","batch","extractRemovedBucketIds","_event$payload2","DDCClustersGovPallet","proposeActivateClusterProtocol","protocolParams","ddcClusterGov","proposeUpdateClusterProtocol","member","nodePublicKey","createClusterMember","voteProposal","approve","closeProposal","retractProposal","refundSubmissionDeposit","referendaIndex","ClusterManager","NodeProvider","Blockchain","api","ddcClustersGov","ApiPromise","provider","WsProvider","wsEndpoint","apiOptions","connect","blockchain","chainDecimals","decimals","registry","getNextNonce","nonce","rpc","system","accountNextIndex","toNumber","send","sendable","finalAccount","finalSigner","Promise","resolve","reject","signAndSend","status","isFinalized","meta","Object","fromEntries","fields","field","index","name","txHash","asFinalized","toHex","dispatchError","errorMessage","isModule","decoded","findMetaError","asModule","docs","join","toString","catch","batchSend","sendables","batchAllSend","batchAll","sudo","sudoAs","who","disconnect","formatBalance","balance","withUnit","withSiFull","getAccountFreeBalance","free","toBigInt","getCurrentBlockNumber","number","chain","getHeader","decodeAddress","ignoreChecksum","cryptoUtil","encodeAddress","createRandomSigner","mnemonicGenerate"],"mappings":"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"}