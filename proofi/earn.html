<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Proofi Earn â€” Your Data = Your Income</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='0' fill='%230A0A0F'/%3E%3Cpath d='M16 4L28 16L16 28L4 16Z' fill='none' stroke='%2300E5FF' stroke-width='2'/%3E%3Cpath d='M16 10L22 16L16 22L10 16Z' fill='%2300E5FF' opacity='0.6'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PROOFI EARN â€” THE BILLION-DOLLAR DATA MONETIZATION APP
       Your Data = Your Income
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    :root {
      --bg: #0A0A0F;
      --bg-elevated: #101018;
      --surface: #16161F;
      --surface-hover: #1C1C28;
      --border: #252535;
      --border-strong: #3A3A50;
      --text: #E4E4F0;
      --text-dim: #8A8AA0;
      --text-muted: #555568;
      --cyan: #00E5FF;
      --green: #00FF88;
      --magenta: #FF3366;
      --purple: #9D4EDD;
      --yellow: #FFB800;
      --orange: #FF6B35;
      --cyan-glow: rgba(0, 229, 255, 0.15);
      --cyan-glow-strong: rgba(0, 229, 255, 0.35);
      --green-glow: rgba(0, 255, 136, 0.15);
      --magenta-glow: rgba(255, 51, 102, 0.15);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100dvh;
      overflow-x: hidden;
      line-height: 1.6;
    }

    ::selection {
      background: var(--cyan);
      color: var(--bg);
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }

    .mono { font-family: 'JetBrains Mono', monospace; }

    /* â•â•â• BACKGROUND EFFECTS â•â•â• */
    .bg-grid {
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(rgba(0, 229, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 229, 255, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    .bg-glow {
      position: fixed;
      width: 600px;
      height: 600px;
      border-radius: 50%;
      filter: blur(150px);
      opacity: 0.25;
      pointer-events: none;
      z-index: 0;
    }

    .bg-glow-1 {
      top: -200px;
      right: -200px;
      background: radial-gradient(circle, var(--cyan) 0%, transparent 70%);
    }

    .bg-glow-2 {
      bottom: -200px;
      left: -200px;
      background: radial-gradient(circle, var(--magenta) 0%, transparent 70%);
    }

    /* â•â•â• HEADER â•â•â• */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 10, 15, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 16px 20px;
    }

    .header-inner {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--text);
    }

    .header-logo {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--cyan) 0%, var(--green) 100%);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 900;
      color: var(--bg);
      font-family: 'Orbitron', sans-serif;
    }

    .header-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--cyan) 0%, var(--green) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header-balance {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 600;
      color: var(--green);
    }

    .header-balance-icon {
      font-size: 14px;
    }

    /* â•â•â• MAIN CONTENT â•â•â• */
    .main {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px 16px 120px;
      position: relative;
      z-index: 1;
    }

    /* â•â•â• VIEWS â•â•â• */
    .view { display: none; }
    .view.active { display: block; }

    /* â•â•â• HERO SECTION â•â•â• */
    .hero {
      text-align: center;
      padding: 40px 0 32px;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid var(--green);
      border-radius: 100px;
      font-size: 12px;
      font-weight: 600;
      color: var(--green);
      margin-bottom: 20px;
      animation: pulse-glow 2s infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.3); }
      50% { box-shadow: 0 0 20px 0 rgba(0, 255, 136, 0.3); }
    }

    .hero-title {
      font-size: clamp(28px, 8vw, 42px);
      font-weight: 900;
      margin-bottom: 12px;
      line-height: 1.1;
    }

    .hero-title .gradient {
      background: linear-gradient(135deg, var(--cyan) 0%, var(--green) 50%, var(--cyan) 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradient-shift 4s ease infinite;
    }

    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .hero-subtitle {
      font-size: 16px;
      color: var(--text-dim);
      max-width: 320px;
      margin: 0 auto 28px;
    }

    /* â•â•â• STATS ROW â•â•â• */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 12px;
      text-align: center;
    }

    .stat-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 20px;
      font-weight: 800;
      color: var(--cyan);
      line-height: 1;
      margin-bottom: 4px;
    }

    .stat-value.green { color: var(--green); }
    .stat-value.magenta { color: var(--magenta); }

    .stat-label {
      font-size: 10px;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* â•â•â• CARDS â•â•â• */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 16px;
      transition: all 0.3s;
    }

    .card:hover {
      border-color: var(--border-strong);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .card-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-badge {
      font-size: 10px;
      padding: 4px 8px;
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid var(--green);
      border-radius: 4px;
      color: var(--green);
      font-weight: 600;
    }

    /* â•â•â• PROGRESS BAR â•â•â• */
    .progress-section {
      margin-bottom: 24px;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .progress-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
    }

    .progress-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--cyan);
    }

    .progress-bar {
      height: 8px;
      background: var(--bg);
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--cyan) 0%, var(--green) 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 20px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3));
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* â•â•â• ONBOARDING STEPS â•â•â• */
    .step-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .step-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .step-item:hover:not(.completed):not(.locked) {
      border-color: var(--cyan);
      transform: translateX(4px);
    }

    .step-item.completed {
      border-color: var(--green);
      background: rgba(0, 255, 136, 0.05);
    }

    .step-item.locked {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-item.active {
      border-color: var(--cyan);
      background: rgba(0, 229, 255, 0.05);
    }

    .step-icon {
      width: 44px;
      height: 44px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }

    .step-item.completed .step-icon {
      background: var(--green);
      border-color: var(--green);
    }

    .step-item.active .step-icon {
      border-color: var(--cyan);
      box-shadow: 0 0 20px var(--cyan-glow);
    }

    .step-content {
      flex: 1;
      min-width: 0;
    }

    .step-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .step-desc {
      font-size: 12px;
      color: var(--text-dim);
    }

    .step-reward {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 600;
      color: var(--green);
      white-space: nowrap;
    }

    .step-check {
      color: var(--green);
      font-size: 20px;
    }

    /* â•â•â• BUTTONS â•â•â• */
    .btn {
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 14px 24px;
      border: 2px solid var(--cyan);
      background: transparent;
      color: var(--cyan);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn:hover {
      background: var(--cyan);
      color: var(--bg);
      box-shadow: 0 0 30px var(--cyan-glow-strong);
    }

    .btn-primary {
      background: var(--cyan);
      color: var(--bg);
    }

    .btn-primary:hover {
      background: var(--text);
      border-color: var(--text);
    }

    .btn-green {
      border-color: var(--green);
      color: var(--green);
    }

    .btn-green:hover {
      background: var(--green);
      color: var(--bg);
      box-shadow: 0 0 30px var(--green-glow);
    }

    .btn-magenta {
      border-color: var(--magenta);
      color: var(--magenta);
    }

    .btn-magenta:hover {
      background: var(--magenta);
      color: white;
      box-shadow: 0 0 30px var(--magenta-glow);
    }

    .btn-sm {
      padding: 10px 16px;
      font-size: 11px;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* â•â•â• FORMS â•â•â• */
    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 11px;
      font-weight: 600;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .form-input, .form-textarea, .form-select {
      width: 100%;
      padding: 14px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      color: var(--text);
      outline: none;
      transition: border-color 0.2s;
    }

    .form-input:focus, .form-textarea:focus, .form-select:focus {
      border-color: var(--cyan);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238A8AA0' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
    }

    .form-hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 6px;
    }

    /* â•â•â• QUIZ OPTIONS â•â•â• */
    .quiz-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .quiz-option {
      padding: 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      font-size: 13px;
    }

    .quiz-option:hover {
      border-color: var(--cyan);
    }

    .quiz-option.selected {
      border-color: var(--cyan);
      background: rgba(0, 229, 255, 0.1);
      color: var(--cyan);
    }

    .quiz-option-icon {
      font-size: 24px;
      margin-bottom: 6px;
    }

    /* â•â•â• EARNINGS DASHBOARD â•â•â• */
    .earnings-hero {
      text-align: center;
      padding: 32px 0;
    }

    .earnings-total {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(40px, 12vw, 56px);
      font-weight: 900;
      color: var(--green);
      line-height: 1;
      margin-bottom: 8px;
      text-shadow: 0 0 40px rgba(0, 255, 136, 0.3);
    }

    .earnings-label {
      font-size: 14px;
      color: var(--text-dim);
      margin-bottom: 24px;
    }

    .earnings-chart {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .chart-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      font-weight: 600;
    }

    .chart-period {
      font-size: 11px;
      color: var(--text-dim);
    }

    .chart-bars {
      display: flex;
      align-items: flex-end;
      gap: 8px;
      height: 100px;
    }

    .chart-bar {
      flex: 1;
      background: linear-gradient(180deg, var(--cyan) 0%, var(--green) 100%);
      border-radius: 4px 4px 0 0;
      min-height: 8px;
      transition: height 0.3s;
      position: relative;
    }

    .chart-bar:hover::after {
      content: attr(data-value);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 4px 8px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 4px;
      font-size: 10px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--cyan);
      white-space: nowrap;
    }

    .chart-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
    }

    .chart-label {
      font-size: 10px;
      color: var(--text-muted);
    }

    /* â•â•â• QUERY LOG â•â•â• */
    .query-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .query-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
    }

    .query-icon {
      width: 36px;
      height: 36px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .query-content {
      flex: 1;
      min-width: 0;
    }

    .query-agent {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .query-data {
      font-size: 11px;
      color: var(--text-dim);
    }

    .query-amount {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 600;
      color: var(--green);
    }

    .query-time {
      font-size: 10px;
      color: var(--text-muted);
    }

    /* â•â•â• PERMISSIONS â•â•â• */
    .permission-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .permission-icon {
      font-size: 24px;
    }

    .permission-content {
      flex: 1;
    }

    .permission-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .permission-price {
      font-size: 11px;
      color: var(--text-dim);
    }

    .permission-toggle {
      position: relative;
      width: 48px;
      height: 26px;
    }

    .permission-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background: var(--border);
      border-radius: 13px;
      transition: 0.3s;
    }

    .toggle-slider::before {
      content: '';
      position: absolute;
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background: var(--text);
      border-radius: 50%;
      transition: 0.3s;
    }

    .permission-toggle input:checked + .toggle-slider {
      background: var(--green);
    }

    .permission-toggle input:checked + .toggle-slider::before {
      transform: translateX(22px);
    }

    /* â•â•â• PRICE SLIDER â•â•â• */
    .price-slider {
      padding: 12px 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin-top: 12px;
    }

    .price-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .price-label {
      font-size: 11px;
      color: var(--text-dim);
    }

    .price-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      color: var(--cyan);
      font-weight: 600;
    }

    .slider {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      background: var(--bg);
      border-radius: 3px;
      outline: none;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      background: var(--cyan);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 10px var(--cyan-glow);
    }

    .slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      background: var(--cyan);
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }

    /* â•â•â• DATA VAULT â•â•â• */
    .vault-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      padding: 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .vault-icon {
      width: 40px;
      height: 40px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .vault-content {
      flex: 1;
      min-width: 0;
    }

    .vault-category {
      font-family: 'Orbitron', sans-serif;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .vault-preview {
      font-size: 12px;
      color: var(--text-dim);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .vault-preview-lock {
      color: var(--green);
    }

    .vault-actions {
      display: flex;
      gap: 8px;
    }

    .vault-action {
      font-size: 11px;
      padding: 6px 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text-dim);
      cursor: pointer;
      transition: all 0.2s;
    }

    .vault-action:hover {
      border-color: var(--cyan);
      color: var(--cyan);
    }

    .vault-action.delete:hover {
      border-color: var(--magenta);
      color: var(--magenta);
    }

    /* â•â•â• ACHIEVEMENTS â•â•â• */
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .achievement {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      transition: all 0.3s;
    }

    .achievement.unlocked {
      border-color: var(--yellow);
      background: rgba(255, 184, 0, 0.05);
    }

    .achievement.locked {
      opacity: 0.5;
    }

    .achievement-icon {
      font-size: 28px;
      margin-bottom: 8px;
    }

    .achievement-name {
      font-size: 11px;
      font-weight: 600;
    }

    /* â•â•â• STREAK â•â•â• */
    .streak-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: linear-gradient(135deg, rgba(255, 184, 0, 0.1) 0%, rgba(255, 107, 53, 0.1) 100%);
      border: 1px solid var(--yellow);
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .streak-fire {
      font-size: 36px;
    }

    .streak-content {
      flex: 1;
    }

    .streak-days {
      font-family: 'Orbitron', sans-serif;
      font-size: 24px;
      font-weight: 800;
      color: var(--yellow);
    }

    .streak-label {
      font-size: 12px;
      color: var(--text-dim);
    }

    /* â•â•â• BOTTOM NAV â•â•â• */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(10, 10, 15, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      display: flex;
      padding-bottom: var(--safe-bottom);
      z-index: 100;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 12px 0;
      font-size: 10px;
      font-weight: 600;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      background: none;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .nav-item.active {
      color: var(--cyan);
    }

    .nav-item:hover:not(.active) {
      color: var(--text-dim);
    }

    .nav-icon {
      font-size: 20px;
    }

    /* â•â•â• MODAL â•â•â• */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      z-index: 200;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 100%;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      border-bottom: 1px solid var(--border);
    }

    .modal-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 16px;
      font-weight: 600;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-dim);
      font-size: 18px;
      transition: all 0.2s;
    }

    .modal-close:hover {
      border-color: var(--magenta);
      color: var(--magenta);
    }

    .modal-body {
      padding: 20px;
    }

    .modal-footer {
      padding: 0 20px 20px;
      display: flex;
      gap: 12px;
    }

    .modal-footer .btn {
      flex: 1;
    }

    /* â•â•â• REWARD ANIMATION â•â•â• */
    .reward-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: var(--surface);
      border: 2px solid var(--green);
      border-radius: 20px;
      padding: 32px 48px;
      text-align: center;
      z-index: 300;
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .reward-popup.active {
      transform: translate(-50%, -50%) scale(1);
    }

    .reward-icon {
      font-size: 48px;
      margin-bottom: 12px;
    }

    .reward-amount {
      font-family: 'Orbitron', sans-serif;
      font-size: 36px;
      font-weight: 900;
      color: var(--green);
      margin-bottom: 8px;
    }

    .reward-label {
      font-size: 14px;
      color: var(--text-dim);
    }

    /* â•â•â• TOAST â•â•â• */
    .toast-container {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 250;
      width: calc(100% - 32px);
      max-width: 380px;
    }

    .toast {
      padding: 14px 18px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 8px;
      animation: slideDown 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toast-success {
      background: rgba(0, 255, 136, 0.1);
      color: var(--green);
      border: 1px solid var(--green);
    }

    .toast-error {
      background: rgba(255, 51, 102, 0.1);
      color: var(--magenta);
      border: 1px solid var(--magenta);
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* â•â•â• LOADING â•â•â• */
    .btn-loading {
      position: relative;
      color: transparent !important;
    }

    .btn-loading::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* â•â•â• RESPONSIVE â•â•â• */
    @media (max-width: 380px) {
      .stats-row {
        grid-template-columns: repeat(2, 1fr);
      }

      .stats-row .stat-card:last-child {
        grid-column: span 2;
      }

      .quiz-options {
        grid-template-columns: 1fr;
      }

      .achievements-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Background Effects -->
  <div class="bg-grid"></div>
  <div class="bg-glow bg-glow-1"></div>
  <div class="bg-glow bg-glow-2"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="portal.html" class="header-brand">
        <div class="header-logo">â—‡</div>
        <span class="header-title">EARN</span>
      </a>
      <div class="header-balance">
        <span class="header-balance-icon">ğŸ’</span>
        <span id="headerBalance">0.00</span>
        <span>CERE</span>
      </div>
    </div>
  </header>

  <!-- Toast Container -->
  <div class="toast-container" id="toasts"></div>

  <!-- Main Content -->
  <main class="main">
    <!-- â•â•â• HOME VIEW â•â•â• -->
    <div class="view active" id="viewHome">
      <div class="hero">
        <div class="hero-badge">
          <span>ğŸ”¥</span>
          <span>BETA â€” Early Adopter Bonus Active</span>
        </div>
        <h1 class="hero-title">
          <span class="gradient">Your Data</span><br>= Your Income
        </h1>
        <p class="hero-subtitle">
          AI agents pay you every time they learn from your data. Start earning now.
        </p>
      </div>

      <!-- Stats -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value green" id="totalEarned">0.00</div>
          <div class="stat-label">Total Earned</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pendingEarnings">0.00</div>
          <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
          <div class="stat-value magenta" id="queriesCount">0</div>
          <div class="stat-label">Queries</div>
        </div>
      </div>

      <!-- Progress -->
      <div class="progress-section">
        <div class="progress-header">
          <span class="progress-title">ğŸ¯ Profile Completion</span>
          <span class="progress-value" id="progressPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
      </div>

      <!-- Streak -->
      <div class="streak-card" id="streakCard" style="display: none;">
        <div class="streak-fire">ğŸ”¥</div>
        <div class="streak-content">
          <div class="streak-days"><span id="streakDays">0</span> Day Streak</div>
          <div class="streak-label">Keep adding data to maintain your streak!</div>
        </div>
      </div>

      <!-- Onboarding Steps -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ“Š</span>
            <span>Data Onboarding</span>
          </div>
          <div class="card-badge" id="rewardBadge">+650 CERE</div>
        </div>

        <div class="step-list" id="stepList">
          <!-- Steps populated by JS -->
        </div>
      </div>

      <!-- CTA -->
      <button class="btn btn-primary btn-green" onclick="startOnboarding()">
        <span>âš¡</span>
        <span>Start Earning</span>
      </button>
    </div>

    <!-- â•â•â• ONBOARDING VIEW â•â•â• -->
    <div class="view" id="viewOnboarding">
      <div id="onboardingContent">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- â•â•â• EARNINGS VIEW â•â•â• -->
    <div class="view" id="viewEarnings">
      <div class="earnings-hero">
        <div class="earnings-total" id="earningsTotal">0.00</div>
        <div class="earnings-label">CERE Earned Lifetime</div>
      </div>

      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value green" id="earnedToday">0.00</div>
          <div class="stat-label">Today</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="earnedWeek">0.00</div>
          <div class="stat-label">This Week</div>
        </div>
        <div class="stat-card">
          <div class="stat-value magenta" id="earnedMonth">0.00</div>
          <div class="stat-label">This Month</div>
        </div>
      </div>

      <!-- Chart -->
      <div class="earnings-chart">
        <div class="chart-header">
          <div class="chart-title">ğŸ“ˆ Earnings History</div>
          <div class="chart-period">Last 7 days</div>
        </div>
        <div class="chart-bars" id="chartBars">
          <!-- Populated by JS -->
        </div>
        <div class="chart-labels">
          <span class="chart-label">Mon</span>
          <span class="chart-label">Tue</span>
          <span class="chart-label">Wed</span>
          <span class="chart-label">Thu</span>
          <span class="chart-label">Fri</span>
          <span class="chart-label">Sat</span>
          <span class="chart-label">Sun</span>
        </div>
      </div>

      <!-- Achievements -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ†</span>
            <span>Achievements</span>
          </div>
        </div>
        <div class="achievements-grid" id="achievementsGrid">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- Recent Queries -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ¤–</span>
            <span>Recent Agent Queries</span>
          </div>
        </div>
        <div class="query-list" id="queryList">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <!-- â•â•â• PERMISSIONS VIEW â•â•â• -->
    <div class="view" id="viewPermissions">
      <h2 style="font-family: 'Orbitron', sans-serif; font-size: 18px; margin-bottom: 8px;">Permissions</h2>
      <p style="font-size: 13px; color: var(--text-dim); margin-bottom: 24px;">Control which data categories agents can access and how much they pay.</p>

      <div id="permissionsList">
        <!-- Populated by JS -->
      </div>

      <!-- Agent Whitelist/Blacklist -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ¤–</span>
            <span>Agent Access</span>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Whitelisted Agents</label>
          <input type="text" class="form-input" placeholder="agent1.ai, agent2.ai" id="whitelist">
          <div class="form-hint">Leave empty to allow all agents</div>
        </div>
        <div class="form-group">
          <label class="form-label">Blacklisted Agents</label>
          <input type="text" class="form-input" placeholder="spam-agent.ai" id="blacklist">
          <div class="form-hint">These agents will never access your data</div>
        </div>
        <button class="btn btn-sm" onclick="saveAgentAccess()">Save Agent Rules</button>
      </div>
    </div>

    <!-- â•â•â• VAULT VIEW â•â•â• -->
    <div class="view" id="viewVault">
      <h2 style="font-family: 'Orbitron', sans-serif; font-size: 18px; margin-bottom: 8px;">Data Vault</h2>
      <p style="font-size: 13px; color: var(--text-dim); margin-bottom: 24px;">Your encrypted data. Only you hold the keys.</p>

      <div id="vaultList">
        <!-- Populated by JS -->
      </div>

      <button class="btn btn-green" onclick="switchToView('viewHome')">
        <span>â•</span>
        <span>Add More Data</span>
      </button>
    </div>
  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-item active" onclick="switchToView('viewHome', this)">
      <span class="nav-icon">ğŸ </span>
      <span>Home</span>
    </button>
    <button class="nav-item" onclick="switchToView('viewEarnings', this)">
      <span class="nav-icon">ğŸ’°</span>
      <span>Earnings</span>
    </button>
    <button class="nav-item" onclick="switchToView('viewPermissions', this)">
      <span class="nav-icon">ğŸ›¡ï¸</span>
      <span>Permissions</span>
    </button>
    <button class="nav-item" onclick="switchToView('viewVault', this)">
      <span class="nav-icon">ğŸ”</span>
      <span>Vault</span>
    </button>
  </nav>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <!-- Populated dynamically -->
    </div>
  </div>

  <!-- Reward Popup -->
  <div class="reward-popup" id="rewardPopup">
    <div class="reward-icon">ğŸ‰</div>
    <div class="reward-amount" id="rewardAmount">+50 CERE</div>
    <div class="reward-label">Added to your balance!</div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PROOFI EARN â€” THE BILLION-DOLLAR DATA MONETIZATION ENGINE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // â•â•â• STATE â•â•â•
    const STORAGE_KEY = 'proofi_earn_data';
    
    const defaultState = {
      isOnboarded: false,
      totalEarned: 0,
      pendingEarnings: 0,
      queriesCount: 0,
      streak: 0,
      lastActiveDate: null,
      completedSteps: [],
      userData: {},
      permissions: {
        basicProfile: { enabled: true, price: 0.05, requireApproval: false },
        preferences: { enabled: true, price: 0.05, requireApproval: false },
        health: { enabled: false, price: 0.25, requireApproval: true },
        workSkills: { enabled: true, price: 0.10, requireApproval: false }
      },
      whitelist: [],
      blacklist: [],
      queryHistory: [],
      achievements: [],
      earningsHistory: [0, 0, 0, 0, 0, 0, 0] // Last 7 days
    };

    let state = loadState();

    function loadState() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          return { ...defaultState, ...JSON.parse(saved) };
        }
      } catch (e) {
        console.error('Failed to load state:', e);
      }
      return { ...defaultState };
    }

    function saveState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      updateUI();
    }

    // â•â•â• ONBOARDING STEPS CONFIG â•â•â•
    const onboardingSteps = [
      {
        id: 'profile',
        name: 'Basic Profile',
        desc: 'Name, bio, interests',
        icon: 'ğŸ‘¤',
        reward: 50,
        fields: [
          { id: 'name', label: 'Full Name', type: 'text', placeholder: 'Your name' },
          { id: 'bio', label: 'Short Bio', type: 'textarea', placeholder: 'Tell us about yourself...' },
          { id: 'interests', label: 'Interests (comma-separated)', type: 'text', placeholder: 'tech, music, fitness' }
        ]
      },
      {
        id: 'preferences',
        name: 'Preferences Quiz',
        desc: 'Food, music, lifestyle',
        icon: 'ğŸ¯',
        reward: 100,
        quizSections: [
          {
            title: 'Food Preferences',
            id: 'food',
            options: [
              { icon: 'ğŸ¥—', label: 'Healthy' },
              { icon: 'ğŸ”', label: 'Fast Food' },
              { icon: 'ğŸ¥˜', label: 'Home Cooked' },
              { icon: 'ğŸ£', label: 'Adventurous' }
            ]
          },
          {
            title: 'Music Taste',
            id: 'music',
            options: [
              { icon: 'ğŸ¸', label: 'Rock' },
              { icon: 'ğŸ¹', label: 'Classical' },
              { icon: 'ğŸ¤', label: 'Pop' },
              { icon: 'ğŸ§', label: 'Electronic' }
            ]
          },
          {
            title: 'Lifestyle',
            id: 'lifestyle',
            options: [
              { icon: 'ğŸƒ', label: 'Active' },
              { icon: 'ğŸ“š', label: 'Homebody' },
              { icon: 'âœˆï¸', label: 'Traveler' },
              { icon: 'ğŸ®', label: 'Gamer' }
            ]
          }
        ]
      },
      {
        id: 'health',
        name: 'Health Basics',
        desc: 'Allergies, medications',
        icon: 'ğŸ¥',
        reward: 250,
        fields: [
          { id: 'allergies', label: 'Allergies', type: 'text', placeholder: 'e.g., peanuts, shellfish' },
          { id: 'medications', label: 'Current Medications', type: 'text', placeholder: 'List any medications' },
          { id: 'conditions', label: 'Health Conditions', type: 'textarea', placeholder: 'Any relevant health conditions' },
          { id: 'bloodType', label: 'Blood Type', type: 'select', options: ['Unknown', 'A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'] }
        ]
      },
      {
        id: 'work',
        name: 'Work & Skills',
        desc: 'Job history, expertise',
        icon: 'ğŸ’¼',
        reward: 250,
        fields: [
          { id: 'currentRole', label: 'Current Role', type: 'text', placeholder: 'e.g., Software Engineer' },
          { id: 'company', label: 'Company', type: 'text', placeholder: 'Current or last employer' },
          { id: 'skills', label: 'Top Skills (comma-separated)', type: 'text', placeholder: 'JavaScript, Python, Marketing' },
          { id: 'experience', label: 'Years of Experience', type: 'select', options: ['< 1 year', '1-3 years', '3-5 years', '5-10 years', '10+ years'] }
        ]
      }
    ];

    // â•â•â• MOCK QUERY DATA â•â•â•
    const mockQueries = [
      { agent: 'Health Agent', icon: 'ğŸ¥', data: 'allergies', amount: 0.10, time: '2 min ago' },
      { agent: 'Shopping Agent', icon: 'ğŸ›ï¸', data: 'preferences', amount: 0.05, time: '15 min ago' },
      { agent: 'Fitness Coach AI', icon: 'ğŸ‹ï¸', data: 'health basics', amount: 0.08, time: '1 hour ago' },
      { agent: 'Career Advisor', icon: 'ğŸ’¼', data: 'skills', amount: 0.12, time: '3 hours ago' },
      { agent: 'Music Agent', icon: 'ğŸµ', data: 'music preferences', amount: 0.03, time: 'Yesterday' }
    ];

    // â•â•â• ACHIEVEMENTS â•â•â•
    const achievements = [
      { id: 'first_data', icon: 'ğŸŒŸ', name: 'First Steps', desc: 'Upload your first data' },
      { id: 'profile_complete', icon: 'ğŸ‘¤', name: 'Identity', desc: 'Complete your profile' },
      { id: 'first_earn', icon: 'ğŸ’°', name: 'First Earn', desc: 'Earn from a query' },
      { id: 'streak_3', icon: 'ğŸ”¥', name: 'On Fire', desc: '3 day streak' },
      { id: 'streak_7', icon: 'âš¡', name: 'Unstoppable', desc: '7 day streak' },
      { id: 'all_data', icon: 'ğŸ†', name: 'Data Master', desc: 'Complete all categories' }
    ];

    // â•â•â• UI HELPERS â•â•â•
    function toast(message, type = 'success') {
      const container = document.getElementById('toasts');
      const el = document.createElement('div');
      el.className = `toast toast-${type}`;
      el.innerHTML = `<span>${type === 'success' ? 'âœ“' : 'âœ—'}</span><span>${message}</span>`;
      container.appendChild(el);
      setTimeout(() => el.remove(), 4000);
    }

    function showReward(amount) {
      const popup = document.getElementById('rewardPopup');
      document.getElementById('rewardAmount').textContent = `+${amount} CERE`;
      popup.classList.add('active');
      setTimeout(() => popup.classList.remove('active'), 2000);
    }

    function switchToView(viewId, navBtn = null) {
      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.getElementById(viewId).classList.add('active');
      
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      if (navBtn) {
        navBtn.classList.add('active');
      } else {
        // Find matching nav button
        const viewMap = {
          'viewHome': 0,
          'viewEarnings': 1,
          'viewPermissions': 2,
          'viewVault': 3,
          'viewOnboarding': 0
        };
        document.querySelectorAll('.nav-item')[viewMap[viewId] || 0].classList.add('active');
      }
    }

    function openModal(content) {
      document.getElementById('modal').innerHTML = content;
      document.getElementById('modalOverlay').classList.add('active');
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('active');
    }

    // Close modal on overlay click
    document.getElementById('modalOverlay').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) closeModal();
    });

    // â•â•â• ENCRYPTION MOCK â•â•â•
    function encryptData(data) {
      // In production, this would use real encryption
      return btoa(JSON.stringify(data)).slice(0, 20) + '...';
    }

    // â•â•â• RENDER FUNCTIONS â•â•â•
    function renderStepList() {
      const container = document.getElementById('stepList');
      container.innerHTML = onboardingSteps.map((step, index) => {
        const isCompleted = state.completedSteps.includes(step.id);
        const isActive = !isCompleted && (index === 0 || state.completedSteps.includes(onboardingSteps[index - 1].id));
        const isLocked = !isCompleted && !isActive;
        
        return `
          <div class="step-item ${isCompleted ? 'completed' : ''} ${isActive ? 'active' : ''} ${isLocked ? 'locked' : ''}" 
               onclick="${isLocked ? '' : `startStep('${step.id}')`}">
            <div class="step-icon">${isCompleted ? 'âœ“' : step.icon}</div>
            <div class="step-content">
              <div class="step-name">${step.name}</div>
              <div class="step-desc">${step.desc}</div>
            </div>
            ${isCompleted ? '<span class="step-check">âœ“</span>' : `<span class="step-reward">+${step.reward} CERE</span>`}
          </div>
        `;
      }).join('');
    }

    function renderQueryList() {
      const container = document.getElementById('queryList');
      const queries = state.queryHistory.length > 0 ? state.queryHistory : mockQueries;
      
      if (queries.length === 0) {
        container.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 20px;">No queries yet. Complete your profile to start earning!</div>';
        return;
      }

      container.innerHTML = queries.slice(0, 5).map(q => `
        <div class="query-item">
          <div class="query-icon">${q.icon}</div>
          <div class="query-content">
            <div class="query-agent">${q.agent}</div>
            <div class="query-data">queried ${q.data}</div>
          </div>
          <div style="text-align: right;">
            <div class="query-amount">+${q.amount.toFixed(2)} CERE</div>
            <div class="query-time">${q.time}</div>
          </div>
        </div>
      `).join('');
    }

    function renderPermissions() {
      const container = document.getElementById('permissionsList');
      const categories = [
        { id: 'basicProfile', name: 'Basic Profile', icon: 'ğŸ‘¤' },
        { id: 'preferences', name: 'Preferences', icon: 'ğŸ¯' },
        { id: 'health', name: 'Health Data', icon: 'ğŸ¥' },
        { id: 'workSkills', name: 'Work & Skills', icon: 'ğŸ’¼' }
      ];

      container.innerHTML = categories.map(cat => {
        const perm = state.permissions[cat.id];
        return `
          <div class="permission-item">
            <div class="permission-icon">${cat.icon}</div>
            <div class="permission-content">
              <div class="permission-name">${cat.name}</div>
              <div class="permission-price">${perm.price.toFixed(2)} CERE per query</div>
            </div>
            <label class="permission-toggle">
              <input type="checkbox" ${perm.enabled ? 'checked' : ''} onchange="togglePermission('${cat.id}')">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="price-slider" style="margin-bottom: 16px;">
            <div class="price-header">
              <span class="price-label">Price per query</span>
              <span class="price-value" id="price-${cat.id}">${perm.price.toFixed(2)} CERE</span>
            </div>
            <input type="range" class="slider" min="0.01" max="1" step="0.01" value="${perm.price}" 
                   onchange="updatePrice('${cat.id}', this.value)">
            <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
              <input type="checkbox" id="approval-${cat.id}" ${perm.requireApproval ? 'checked' : ''} 
                     onchange="toggleApproval('${cat.id}')">
              <label for="approval-${cat.id}" style="font-size: 11px; color: var(--text-dim);">Require approval for each query</label>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderVault() {
      const container = document.getElementById('vaultList');
      const categories = [
        { id: 'profile', name: 'Basic Profile', icon: 'ğŸ‘¤' },
        { id: 'preferences', name: 'Preferences', icon: 'ğŸ¯' },
        { id: 'health', name: 'Health Data', icon: 'ğŸ¥' },
        { id: 'work', name: 'Work & Skills', icon: 'ğŸ’¼' }
      ];

      const completedCategories = categories.filter(cat => state.completedSteps.includes(cat.id));

      if (completedCategories.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 40px 20px; color: var(--text-muted);">
            <div style="font-size: 40px; margin-bottom: 12px;">ğŸ”</div>
            <div style="font-size: 14px;">Your vault is empty</div>
            <div style="font-size: 12px; margin-top: 4px;">Complete onboarding to store encrypted data</div>
          </div>
        `;
        return;
      }

      container.innerHTML = completedCategories.map(cat => {
        const data = state.userData[cat.id] || {};
        const preview = encryptData(data);
        
        return `
          <div class="vault-item">
            <div class="vault-icon">${cat.icon}</div>
            <div class="vault-content">
              <div class="vault-category">${cat.name}</div>
              <div class="vault-preview">
                <span class="vault-preview-lock">ğŸ”’</span>
                <span class="mono">${preview}</span>
              </div>
              <div class="vault-actions">
                <button class="vault-action" onclick="editVaultItem('${cat.id}')">Edit</button>
                <button class="vault-action delete" onclick="deleteVaultItem('${cat.id}')">Delete</button>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderAchievements() {
      const container = document.getElementById('achievementsGrid');
      container.innerHTML = achievements.map(a => {
        const unlocked = state.achievements.includes(a.id);
        return `
          <div class="achievement ${unlocked ? 'unlocked' : 'locked'}" title="${a.desc}">
            <div class="achievement-icon">${unlocked ? a.icon : 'ğŸ”’'}</div>
            <div class="achievement-name">${a.name}</div>
          </div>
        `;
      }).join('');
    }

    function renderChart() {
      const container = document.getElementById('chartBars');
      const max = Math.max(...state.earningsHistory, 1);
      
      container.innerHTML = state.earningsHistory.map((val, i) => {
        const height = Math.max(8, (val / max) * 100);
        return `<div class="chart-bar" style="height: ${height}px" data-value="${val.toFixed(2)} CERE"></div>`;
      }).join('');
    }

    function updateUI() {
      // Header balance
      document.getElementById('headerBalance').textContent = state.totalEarned.toFixed(2);
      
      // Stats
      document.getElementById('totalEarned').textContent = state.totalEarned.toFixed(2);
      document.getElementById('pendingEarnings').textContent = state.pendingEarnings.toFixed(2);
      document.getElementById('queriesCount').textContent = state.queriesCount;
      
      // Progress
      const progress = (state.completedSteps.length / onboardingSteps.length) * 100;
      document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
      document.getElementById('progressFill').style.width = `${progress}%`;
      
      // Earnings view
      document.getElementById('earningsTotal').textContent = state.totalEarned.toFixed(2);
      document.getElementById('earnedToday').textContent = (state.earningsHistory[6] || 0).toFixed(2);
      document.getElementById('earnedWeek').textContent = state.earningsHistory.reduce((a, b) => a + b, 0).toFixed(2);
      document.getElementById('earnedMonth').textContent = (state.totalEarned * 0.8).toFixed(2); // Mock
      
      // Streak
      if (state.streak > 0) {
        document.getElementById('streakCard').style.display = 'flex';
        document.getElementById('streakDays').textContent = state.streak;
      }
      
      // Remaining rewards
      const remainingReward = onboardingSteps
        .filter(s => !state.completedSteps.includes(s.id))
        .reduce((sum, s) => sum + s.reward, 0);
      document.getElementById('rewardBadge').textContent = `+${remainingReward} CERE`;

      // Render lists
      renderStepList();
      renderQueryList();
      renderPermissions();
      renderVault();
      renderAchievements();
      renderChart();
    }

    // â•â•â• ONBOARDING FLOW â•â•â•
    function startOnboarding() {
      const nextStep = onboardingSteps.find(s => !state.completedSteps.includes(s.id));
      if (nextStep) {
        startStep(nextStep.id);
      } else {
        toast('All data categories completed! ğŸ‰');
      }
    }

    function startStep(stepId) {
      const step = onboardingSteps.find(s => s.id === stepId);
      if (!step) return;
      
      if (state.completedSteps.includes(stepId)) {
        // Already completed - show edit modal
        editVaultItem(stepId);
        return;
      }

      switchToView('viewOnboarding');
      
      let content = `
        <div style="margin-bottom: 24px;">
          <button class="btn btn-sm" onclick="switchToView('viewHome')" style="width: auto; padding: 8px 16px; margin-bottom: 16px;">â† Back</button>
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
            <div style="font-size: 32px;">${step.icon}</div>
            <div>
              <h2 style="font-family: 'Orbitron', sans-serif; font-size: 20px;">${step.name}</h2>
              <div style="font-size: 13px; color: var(--text-dim);">${step.desc}</div>
            </div>
          </div>
          <div class="hero-badge" style="display: inline-flex; margin-top: 12px;">
            <span>ğŸ’</span>
            <span>Earn +${step.reward} CERE</span>
          </div>
        </div>
      `;

      if (step.fields) {
        // Form-based step
        content += `<form id="stepForm" class="card" onsubmit="submitStepForm(event, '${step.id}', ${step.reward})">`;
        step.fields.forEach(field => {
          content += `<div class="form-group">`;
          content += `<label class="form-label">${field.label}</label>`;
          
          if (field.type === 'textarea') {
            content += `<textarea class="form-textarea" name="${field.id}" placeholder="${field.placeholder}"></textarea>`;
          } else if (field.type === 'select') {
            content += `<select class="form-select" name="${field.id}">`;
            field.options.forEach(opt => {
              content += `<option value="${opt}">${opt}</option>`;
            });
            content += `</select>`;
          } else {
            content += `<input type="${field.type}" class="form-input" name="${field.id}" placeholder="${field.placeholder}">`;
          }
          
          content += `</div>`;
        });
        content += `
          <div class="form-hint" style="margin-bottom: 16px;">ğŸ”’ Your data is encrypted before leaving your device</div>
          <button type="submit" class="btn btn-primary btn-green">Complete & Earn +${step.reward} CERE</button>
        </form>`;
      } else if (step.quizSections) {
        // Quiz-based step
        content += `<form id="stepForm" onsubmit="submitQuizForm(event, '${step.id}', ${step.reward})">`;
        step.quizSections.forEach((section, idx) => {
          content += `
            <div class="card" style="margin-bottom: 12px;">
              <div class="card-title" style="margin-bottom: 12px;">${section.title}</div>
              <div class="quiz-options" id="quiz-${section.id}">
                ${section.options.map((opt, i) => `
                  <div class="quiz-option" onclick="selectQuizOption('${section.id}', ${i}, this)" data-value="${opt.label}">
                    <div class="quiz-option-icon">${opt.icon}</div>
                    <div>${opt.label}</div>
                  </div>
                `).join('')}
              </div>
              <input type="hidden" name="${section.id}" id="input-${section.id}">
            </div>
          `;
        });
        content += `
          <div class="form-hint" style="margin-bottom: 16px;">ğŸ”’ Your preferences are encrypted</div>
          <button type="submit" class="btn btn-primary btn-green">Complete & Earn +${step.reward} CERE</button>
        </form>`;
      }

      document.getElementById('onboardingContent').innerHTML = content;
    }

    function selectQuizOption(sectionId, index, el) {
      // Remove selection from siblings
      el.parentElement.querySelectorAll('.quiz-option').forEach(o => o.classList.remove('selected'));
      el.classList.add('selected');
      document.getElementById(`input-${sectionId}`).value = el.dataset.value;
    }

    function submitStepForm(e, stepId, reward) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      // Validate
      if (Object.values(data).some(v => !v.trim())) {
        toast('Please fill in all fields', 'error');
        return;
      }

      completeStep(stepId, data, reward);
    }

    function submitQuizForm(e, stepId, reward) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      // Validate
      if (Object.values(data).some(v => !v)) {
        toast('Please select an option for each category', 'error');
        return;
      }

      completeStep(stepId, data, reward);
    }

    function completeStep(stepId, data, reward) {
      // Save data
      state.userData[stepId] = data;
      state.completedSteps.push(stepId);
      state.totalEarned += reward;
      state.earningsHistory[6] += reward;
      
      // Update streak
      const today = new Date().toDateString();
      if (state.lastActiveDate !== today) {
        const yesterday = new Date(Date.now() - 86400000).toDateString();
        if (state.lastActiveDate === yesterday) {
          state.streak++;
        } else {
          state.streak = 1;
        }
        state.lastActiveDate = today;
      }
      
      // Check achievements
      if (state.completedSteps.length === 1 && !state.achievements.includes('first_data')) {
        state.achievements.push('first_data');
        toast('ğŸ† Achievement unlocked: First Steps!');
      }
      if (stepId === 'profile' && !state.achievements.includes('profile_complete')) {
        state.achievements.push('profile_complete');
        toast('ğŸ† Achievement unlocked: Identity!');
      }
      if (state.completedSteps.length === onboardingSteps.length && !state.achievements.includes('all_data')) {
        state.achievements.push('all_data');
        toast('ğŸ† Achievement unlocked: Data Master!');
      }
      if (state.streak >= 3 && !state.achievements.includes('streak_3')) {
        state.achievements.push('streak_3');
        toast('ğŸ† Achievement unlocked: On Fire!');
      }
      if (state.streak >= 7 && !state.achievements.includes('streak_7')) {
        state.achievements.push('streak_7');
        toast('ğŸ† Achievement unlocked: Unstoppable!');
      }

      saveState();
      
      // Show reward
      showReward(reward);
      
      // Switch back to home after delay
      setTimeout(() => {
        switchToView('viewHome');
        toast(`${stepId.charAt(0).toUpperCase() + stepId.slice(1)} data saved and encrypted! ğŸ”’`);
      }, 1500);
    }

    // â•â•â• PERMISSION HANDLERS â•â•â•
    function togglePermission(catId) {
      state.permissions[catId].enabled = !state.permissions[catId].enabled;
      saveState();
    }

    function updatePrice(catId, value) {
      state.permissions[catId].price = parseFloat(value);
      document.getElementById(`price-${catId}`).textContent = parseFloat(value).toFixed(2) + ' CERE';
      saveState();
    }

    function toggleApproval(catId) {
      state.permissions[catId].requireApproval = !state.permissions[catId].requireApproval;
      saveState();
    }

    function saveAgentAccess() {
      const whitelist = document.getElementById('whitelist').value.split(',').map(s => s.trim()).filter(s => s);
      const blacklist = document.getElementById('blacklist').value.split(',').map(s => s.trim()).filter(s => s);
      state.whitelist = whitelist;
      state.blacklist = blacklist;
      saveState();
      toast('Agent access rules saved!');
    }

    // â•â•â• VAULT HANDLERS â•â•â•
    function editVaultItem(catId) {
      const step = onboardingSteps.find(s => s.id === catId);
      if (!step) return;
      
      const currentData = state.userData[catId] || {};
      
      let formContent = '';
      if (step.fields) {
        step.fields.forEach(field => {
          formContent += `<div class="form-group">`;
          formContent += `<label class="form-label">${field.label}</label>`;
          
          if (field.type === 'textarea') {
            formContent += `<textarea class="form-textarea" name="${field.id}">${currentData[field.id] || ''}</textarea>`;
          } else if (field.type === 'select') {
            formContent += `<select class="form-select" name="${field.id}">`;
            field.options.forEach(opt => {
              formContent += `<option value="${opt}" ${currentData[field.id] === opt ? 'selected' : ''}>${opt}</option>`;
            });
            formContent += `</select>`;
          } else {
            formContent += `<input type="${field.type}" class="form-input" name="${field.id}" value="${currentData[field.id] || ''}">`;
          }
          
          formContent += `</div>`;
        });
      }

      openModal(`
        <div class="modal-header">
          <div class="modal-title">Edit ${step.name}</div>
          <button class="modal-close" onclick="closeModal()">Ã—</button>
        </div>
        <form class="modal-body" onsubmit="saveVaultEdit(event, '${catId}')">
          ${formContent}
          <div class="form-hint">ğŸ”’ Changes are encrypted before saving</div>
        </form>
        <div class="modal-footer">
          <button class="btn" onclick="closeModal()">Cancel</button>
          <button class="btn btn-primary" onclick="document.querySelector('.modal-body form').requestSubmit()">Save Changes</button>
        </div>
      `);
    }

    function saveVaultEdit(e, catId) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      state.userData[catId] = data;
      saveState();
      closeModal();
      toast('Data updated and re-encrypted! ğŸ”’');
    }

    function deleteVaultItem(catId) {
      openModal(`
        <div class="modal-header">
          <div class="modal-title">Delete Data</div>
          <button class="modal-close" onclick="closeModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <p style="color: var(--text-dim); font-size: 14px;">Are you sure you want to delete this data? This will remove it from your vault and you'll stop earning from queries on this category.</p>
        </div>
        <div class="modal-footer">
          <button class="btn" onclick="closeModal()">Cancel</button>
          <button class="btn btn-magenta" onclick="confirmDeleteVault('${catId}')">Delete</button>
        </div>
      `);
    }

    function confirmDeleteVault(catId) {
      delete state.userData[catId];
      state.completedSteps = state.completedSteps.filter(s => s !== catId);
      saveState();
      closeModal();
      toast('Data deleted from vault');
    }

    // â•â•â• SIMULATE QUERIES (DEMO) â•â•â•
    function simulateQuery() {
      if (state.completedSteps.length === 0) return;
      
      const enabledCategories = Object.entries(state.permissions)
        .filter(([id, perm]) => perm.enabled && state.completedSteps.some(s => 
          (s === 'profile' && id === 'basicProfile') ||
          (s === 'preferences' && id === 'preferences') ||
          (s === 'health' && id === 'health') ||
          (s === 'work' && id === 'workSkills')
        ))
        .map(([id, perm]) => ({ id, price: perm.price }));
      
      if (enabledCategories.length === 0) return;
      
      const category = enabledCategories[Math.floor(Math.random() * enabledCategories.length)];
      const agents = ['Health Agent', 'Shopping Agent', 'Fitness Coach AI', 'Career Advisor', 'Music Agent', 'Travel Planner'];
      const icons = ['ğŸ¥', 'ğŸ›ï¸', 'ğŸ‹ï¸', 'ğŸ’¼', 'ğŸµ', 'âœˆï¸'];
      const agentIndex = Math.floor(Math.random() * agents.length);
      
      const query = {
        agent: agents[agentIndex],
        icon: icons[agentIndex],
        data: category.id.replace(/([A-Z])/g, ' $1').toLowerCase().trim(),
        amount: category.price,
        time: 'Just now'
      };
      
      state.queryHistory.unshift(query);
      state.queryHistory = state.queryHistory.slice(0, 20);
      state.totalEarned += category.price;
      state.pendingEarnings += category.price * 0.2;
      state.queriesCount++;
      state.earningsHistory[6] += category.price;
      
      if (!state.achievements.includes('first_earn')) {
        state.achievements.push('first_earn');
        toast('ğŸ† Achievement unlocked: First Earn!');
      }
      
      saveState();
    }

    // Simulate random queries for demo
    setInterval(() => {
      if (Math.random() < 0.3 && state.completedSteps.length > 0) {
        simulateQuery();
      }
    }, 15000);

    // â•â•â• INIT â•â•â•
    function init() {
      // Check auth
      const token = localStorage.getItem('proofi_token');
      if (!token) {
        // For demo purposes, continue without auth
        // window.location.href = 'landing.html';
      }
      
      updateUI();
      
      // Restore agent access inputs
      document.getElementById('whitelist').value = state.whitelist.join(', ');
      document.getElementById('blacklist').value = state.blacklist.join(', ');
    }

    init();
  </script>
</body>
</html>
